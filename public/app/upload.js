/*! For license information please see upload.js.LICENSE.txt */
(()=>{var e,t={11:(e,t,n)=>{let r;e.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:n.g):e=>(r||(r=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))},342:(e,t,n)=>{"use strict";n(459);var r=n(257),o=n.n(r);const s=new Map;class i{#e;#t;static TERMINATOR=new i([0,0,0],0);static NUMERIC=new i([10,12,14],1);static ALPHANUMERIC=new i([9,11,13],2);static STRUCTURED_APPEND=new i([0,0,0],3);static BYTE=new i([8,16,16],4);static ECI=new i([0,0,0],7);static KANJI=new i([8,10,12],8);static FNC1_FIRST_POSITION=new i([0,0,0],5);static FNC1_SECOND_POSITION=new i([0,0,0],9);static HANZI=new i([8,10,12],13);constructor(e,t){this.#e=t,this.#t=new Int32Array(e),s.set(t,this)}get bits(){return this.#e}getCharacterCountBits({version:e}){let t;return t=e<=9?0:e<=26?1:2,this.#t[t]}}function a(e){return 1&e}function l(e){return 0|e}function c(e){return 31&e}function u(e){return 32-Math.clz32(e)}function f(e,t){const n=u(t);for(e<<=n-1;u(e)>=n;)e^=t<<u(e)-n;return e}function d(e,t,n){return 1===e.get(t,n)}function p(e,t){let n=0;const{size:r}=e;for(let o=0;o<r;o++){let s=-1,i=0;for(let a=0;a<r;a++){const r=t?e.get(o,a):e.get(a,o);r===s?i++:(i>=5&&(n+=i-5+3),s=r,i=1)}i>=5&&(n+=i-5+3)}return n}function h(e,t,n,r,o){if(n<0||r>e.size)return!1;for(let s=n;s<r;s++)if(o?d(e,t,s):d(e,s,t))return!1;return!0}function w(e){return function(e){return p(e)+p(e,!0)}(e)+function(e){let t=0;const n=e.size-1;for(let r=0;r<n;r++)for(let o=0;o<n;o++){const n=e.get(o,r);n===e.get(o+1,r)&&n===e.get(o,r+1)&&n===e.get(o+1,r+1)&&(t+=3)}return t}(e)+function(e){let t=0;const{size:n}=e;for(let r=0;r<n;r++)for(let o=0;o<n;o++)o+6<n&&d(e,o,r)&&!d(e,o+1,r)&&d(e,o+2,r)&&d(e,o+3,r)&&d(e,o+4,r)&&!d(e,o+5,r)&&d(e,o+6,r)&&(h(e,r,o-4,o)||h(e,r,o+7,o+11))&&t++,r+6<n&&d(e,o,r)&&!d(e,o,r+1)&&d(e,o,r+2)&&d(e,o,r+3)&&d(e,o,r+4)&&!d(e,o,r+5)&&d(e,o,r+6)&&(h(e,o,r-4,r,!0)||h(e,o,r+7,r+11,!0))&&t++;return 40*t}(e)+function(e){let t=0;const{size:n}=e;for(let r=0;r<n;r++)for(let o=0;o<n;o++)d(e,o,r)&&t++;const r=n*n;return 10*l(10*Math.abs(2*t-r)/r)}(e)}function g(e,t,n){let r,o;switch(e){case 0:o=n+t&1;break;case 1:o=1&n;break;case 2:o=t%3;break;case 3:o=(n+t)%3;break;case 4:o=l(n/2)+l(t/3)&1;break;case 5:r=n*t,o=(1&r)+r%3;break;case 6:r=n*t,o=(1&r)+r%3&1;break;case 7:o=n*t%3+(n+t&1)&1;break;default:throw new Error(`illegal mask: ${e}`)}return 0===o}function m(e){return l(e/32)}function v(e){return new Int32Array(Math.ceil(e/32))}class y{#n;#e;constructor(e=0){this.#n=e,this.#e=v(e)}#r(e){const t=this.#e;if(e>32*t.length){const n=v(Math.ceil(e/.75));n.set(t),this.#e=n}this.#n=e}get length(){return this.#n}get byteLength(){return Math.ceil(this.#n/8)}set(e){this.#e[m(e)]|=1<<c(e)}get(e){return a(this.#e[m(e)]>>>c(e))}xor(e){const t=this.#e,n=e.#e,r=Math.min(this.#n,e.#n);for(let e=0;e<r;e++)t[e]^=n[e]}append(e,t=1){let n=this.#n;if(e instanceof y){t=e.#n,this.#r(n+t);for(let r=0;r<t;r++)0!==e.get(r)&&this.set(n),n++}else{this.#r(n+t);for(let r=t-1;r>=0;r--)0!==a(e>>>r)&&this.set(n),n++}}writeToUint8Array(e,t,n,r){for(let o=0;o<r;o++){let r=0;for(let t=0;t<8;t++)0!==this.get(e++)&&(r|=1<<7-t);t[n+o]=r}}clear(){this.#e.fill(0)}}class b{#o;#s;constructor(e){this.#o=e,this.#s=new Int8Array(e*e)}get size(){return this.#o}set(e,t,n){this.#s[t*this.#o+e]=n}get(e,t){return this.#s[t*this.#o+e]}clear(e){this.#s.fill(e)}}class _{#i;#a;constructor(e,t){this.#i=e,this.#a=t}get count(){return this.#i}get numDataCodewords(){return this.#a}}class C{#l;#c;#u;#f;#d;constructor(e,...t){let n=0,r=0;for(const{count:e,numDataCodewords:o}of t)n+=e,r+=o*e;const o=e*n;this.#l=t,this.#u=o,this.#f=r,this.#d=e,this.#c=r+o}get ecBlocks(){return this.#l}get numTotalCodewords(){return this.#c}get numTotalECCodewords(){return this.#u}get numTotalDataCodewords(){return this.#f}get numECCodewordsPerBlock(){return this.#d}}class S{#o;#p;#l;#h;constructor(e,t,...n){this.#p=e,this.#l=n,this.#o=17+4*e,this.#h=t}get size(){return this.#o}get version(){return this.#p}get alignmentPatterns(){return this.#h}getECBlocks({level:e}){return this.#l[e]}}const k=[new S(1,[],new C(7,new _(1,19)),new C(10,new _(1,16)),new C(13,new _(1,13)),new C(17,new _(1,9))),new S(2,[6,18],new C(10,new _(1,34)),new C(16,new _(1,28)),new C(22,new _(1,22)),new C(28,new _(1,16))),new S(3,[6,22],new C(15,new _(1,55)),new C(26,new _(1,44)),new C(18,new _(2,17)),new C(22,new _(2,13))),new S(4,[6,26],new C(20,new _(1,80)),new C(18,new _(2,32)),new C(26,new _(2,24)),new C(16,new _(4,9))),new S(5,[6,30],new C(26,new _(1,108)),new C(24,new _(2,43)),new C(18,new _(2,15),new _(2,16)),new C(22,new _(2,11),new _(2,12))),new S(6,[6,34],new C(18,new _(2,68)),new C(16,new _(4,27)),new C(24,new _(4,19)),new C(28,new _(4,15))),new S(7,[6,22,38],new C(20,new _(2,78)),new C(18,new _(4,31)),new C(18,new _(2,14),new _(4,15)),new C(26,new _(4,13),new _(1,14))),new S(8,[6,24,42],new C(24,new _(2,97)),new C(22,new _(2,38),new _(2,39)),new C(22,new _(4,18),new _(2,19)),new C(26,new _(4,14),new _(2,15))),new S(9,[6,26,46],new C(30,new _(2,116)),new C(22,new _(3,36),new _(2,37)),new C(20,new _(4,16),new _(4,17)),new C(24,new _(4,12),new _(4,13))),new S(10,[6,28,50],new C(18,new _(2,68),new _(2,69)),new C(26,new _(4,43),new _(1,44)),new C(24,new _(6,19),new _(2,20)),new C(28,new _(6,15),new _(2,16))),new S(11,[6,30,54],new C(20,new _(4,81)),new C(30,new _(1,50),new _(4,51)),new C(28,new _(4,22),new _(4,23)),new C(24,new _(3,12),new _(8,13))),new S(12,[6,32,58],new C(24,new _(2,92),new _(2,93)),new C(22,new _(6,36),new _(2,37)),new C(26,new _(4,20),new _(6,21)),new C(28,new _(7,14),new _(4,15))),new S(13,[6,34,62],new C(26,new _(4,107)),new C(22,new _(8,37),new _(1,38)),new C(24,new _(8,20),new _(4,21)),new C(22,new _(12,11),new _(4,12))),new S(14,[6,26,46,66],new C(30,new _(3,115),new _(1,116)),new C(24,new _(4,40),new _(5,41)),new C(20,new _(11,16),new _(5,17)),new C(24,new _(11,12),new _(5,13))),new S(15,[6,26,48,70],new C(22,new _(5,87),new _(1,88)),new C(24,new _(5,41),new _(5,42)),new C(30,new _(5,24),new _(7,25)),new C(24,new _(11,12),new _(7,13))),new S(16,[6,26,50,74],new C(24,new _(5,98),new _(1,99)),new C(28,new _(7,45),new _(3,46)),new C(24,new _(15,19),new _(2,20)),new C(30,new _(3,15),new _(13,16))),new S(17,[6,30,54,78],new C(28,new _(1,107),new _(5,108)),new C(28,new _(10,46),new _(1,47)),new C(28,new _(1,22),new _(15,23)),new C(28,new _(2,14),new _(17,15))),new S(18,[6,30,56,82],new C(30,new _(5,120),new _(1,121)),new C(26,new _(9,43),new _(4,44)),new C(28,new _(17,22),new _(1,23)),new C(28,new _(2,14),new _(19,15))),new S(19,[6,30,58,86],new C(28,new _(3,113),new _(4,114)),new C(26,new _(3,44),new _(11,45)),new C(26,new _(17,21),new _(4,22)),new C(26,new _(9,13),new _(16,14))),new S(20,[6,34,62,90],new C(28,new _(3,107),new _(5,108)),new C(26,new _(3,41),new _(13,42)),new C(30,new _(15,24),new _(5,25)),new C(28,new _(15,15),new _(10,16))),new S(21,[6,28,50,72,94],new C(28,new _(4,116),new _(4,117)),new C(26,new _(17,42)),new C(28,new _(17,22),new _(6,23)),new C(30,new _(19,16),new _(6,17))),new S(22,[6,26,50,74,98],new C(28,new _(2,111),new _(7,112)),new C(28,new _(17,46)),new C(30,new _(7,24),new _(16,25)),new C(24,new _(34,13))),new S(23,[6,30,54,78,102],new C(30,new _(4,121),new _(5,122)),new C(28,new _(4,47),new _(14,48)),new C(30,new _(11,24),new _(14,25)),new C(30,new _(16,15),new _(14,16))),new S(24,[6,28,54,80,106],new C(30,new _(6,117),new _(4,118)),new C(28,new _(6,45),new _(14,46)),new C(30,new _(11,24),new _(16,25)),new C(30,new _(30,16),new _(2,17))),new S(25,[6,32,58,84,110],new C(26,new _(8,106),new _(4,107)),new C(28,new _(8,47),new _(13,48)),new C(30,new _(7,24),new _(22,25)),new C(30,new _(22,15),new _(13,16))),new S(26,[6,30,58,86,114],new C(28,new _(10,114),new _(2,115)),new C(28,new _(19,46),new _(4,47)),new C(28,new _(28,22),new _(6,23)),new C(30,new _(33,16),new _(4,17))),new S(27,[6,34,62,90,118],new C(30,new _(8,122),new _(4,123)),new C(28,new _(22,45),new _(3,46)),new C(30,new _(8,23),new _(26,24)),new C(30,new _(12,15),new _(28,16))),new S(28,[6,26,50,74,98,122],new C(30,new _(3,117),new _(10,118)),new C(28,new _(3,45),new _(23,46)),new C(30,new _(4,24),new _(31,25)),new C(30,new _(11,15),new _(31,16))),new S(29,[6,30,54,78,102,126],new C(30,new _(7,116),new _(7,117)),new C(28,new _(21,45),new _(7,46)),new C(30,new _(1,23),new _(37,24)),new C(30,new _(19,15),new _(26,16))),new S(30,[6,26,52,78,104,130],new C(30,new _(5,115),new _(10,116)),new C(28,new _(19,47),new _(10,48)),new C(30,new _(15,24),new _(25,25)),new C(30,new _(23,15),new _(25,16))),new S(31,[6,30,56,82,108,134],new C(30,new _(13,115),new _(3,116)),new C(28,new _(2,46),new _(29,47)),new C(30,new _(42,24),new _(1,25)),new C(30,new _(23,15),new _(28,16))),new S(32,[6,34,60,86,112,138],new C(30,new _(17,115)),new C(28,new _(10,46),new _(23,47)),new C(30,new _(10,24),new _(35,25)),new C(30,new _(19,15),new _(35,16))),new S(33,[6,30,58,86,114,142],new C(30,new _(17,115),new _(1,116)),new C(28,new _(14,46),new _(21,47)),new C(30,new _(29,24),new _(19,25)),new C(30,new _(11,15),new _(46,16))),new S(34,[6,34,62,90,118,146],new C(30,new _(13,115),new _(6,116)),new C(28,new _(14,46),new _(23,47)),new C(30,new _(44,24),new _(7,25)),new C(30,new _(59,16),new _(1,17))),new S(35,[6,30,54,78,102,126,150],new C(30,new _(12,121),new _(7,122)),new C(28,new _(12,47),new _(26,48)),new C(30,new _(39,24),new _(14,25)),new C(30,new _(22,15),new _(41,16))),new S(36,[6,24,50,76,102,128,154],new C(30,new _(6,121),new _(14,122)),new C(28,new _(6,47),new _(34,48)),new C(30,new _(46,24),new _(10,25)),new C(30,new _(2,15),new _(64,16))),new S(37,[6,28,54,80,106,132,158],new C(30,new _(17,122),new _(4,123)),new C(28,new _(29,46),new _(14,47)),new C(30,new _(49,24),new _(10,25)),new C(30,new _(24,15),new _(46,16))),new S(38,[6,32,58,84,110,136,162],new C(30,new _(4,122),new _(18,123)),new C(28,new _(13,46),new _(32,47)),new C(30,new _(48,24),new _(14,25)),new C(30,new _(42,15),new _(32,16))),new S(39,[6,26,54,82,110,138,166],new C(30,new _(20,117),new _(4,118)),new C(28,new _(40,47),new _(7,48)),new C(30,new _(43,24),new _(22,25)),new C(30,new _(10,15),new _(67,16))),new S(40,[6,30,58,86,114,142,170],new C(30,new _(19,118),new _(6,119)),new C(28,new _(18,47),new _(31,48)),new C(30,new _(34,24),new _(34,25)),new C(30,new _(20,15),new _(61,16)))],U=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,1,1,1,0,1],[1,0,1,1,1,0,1],[1,0,1,1,1,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],E=[[1,1,1,1,1],[1,0,0,0,1],[1,0,1,0,1],[1,0,0,0,1],[1,1,1,1,1]],x=[[8,0],[8,1],[8,2],[8,3],[8,4],[8,5],[8,7],[8,8],[7,8],[5,8],[4,8],[3,8],[2,8],[1,8],[0,8]];function A(e,t,n){return-1===e.get(t,n)}function P(e,t,n){for(let r=0;r<7;r++){const o=U[r];for(let s=0;s<7;s++)e.set(t+s,n+r,o[s])}}function O(e,t,n){for(let r=0;r<8;r++)e.set(t+r,n,0)}function R(e,t,n){for(let r=0;r<7;r++)e.set(t,n+r,0)}function z(e,t,n){for(let r=0;r<5;r++){const o=E[r];for(let s=0;s<5;s++)e.set(t+s,n+r,o[s])}}function I(e,t,n,r,o){(function(e,t,n){const r=new y;!function(e,t,n){const r=t.bits<<3|n;e.append(r,5);const o=f(r,1335);e.append(o,10);const s=new y;s.append(21522,15),e.xor(s)}(r,t,n);const{size:o}=e,{length:s}=r;for(let t=0;t<s;t++){const[n,i]=x[t],a=r.get(s-1-t);e.set(n,i,a),t<8?e.set(o-t-1,8,a):e.set(8,o-7+(t-8),a)}!function(e){e.set(8,e.size-8,1)}(e)})(e,r,o),function(e,{version:t}){if(t>=7){const n=new y;!function(e,t){e.append(t,6);const n=f(t,7973);e.append(n,12)}(n,t);let r=17;const{size:o}=e;for(let t=0;t<6;t++)for(let s=0;s<3;s++){const i=n.get(r--);e.set(t,o-11+s,i),e.set(o-11+s,t,i)}}}(e,n),function(e,t,n){let r=0;const{size:o}=e,{length:s}=t;for(let i=o-1;i>=1;i-=2){6===i&&(i=5);for(let a=0;a<o;a++)for(let l=0;l<2;l++){const c=i-l,u=i+1&2?a:o-1-a;if(A(e,c,u)){let o=0;r<s&&(o=t.get(r++)),g(n,c,u)&&(o^=1),e.set(c,u,o)}}}}(e,t,o)}function T(e,t,n,r){const o=new b(t.size);return o.clear(-1),function(e,t){!function(e){const{size:t}=e;P(e,0,0),P(e,t-7,0),P(e,0,t-7),O(e,0,7),O(e,t-8,7),O(e,0,t-8),R(e,7,0),R(e,t-7-1,0),R(e,7,t-7)}(e),function(e,{version:t}){if(t>=2){const{alignmentPatterns:n}=k[t-1],{length:r}=n;for(let t=0;t<r;t++){const o=n[t];for(let t=0;t<r;t++){const r=n[t];A(e,r,o)&&z(e,r-2,o-2)}}}}(e,t),function(e){const t=e.size-8;for(let n=8;n<t;n++){const t=n+1&1;A(e,n,6)&&e.set(n,6,t)}for(let n=8;n<t;n++){const t=n+1&1;A(e,6,n)&&e.set(6,n,t)}}(e)}(o,t),I(o,e,t,n,r),o}class D{#w;#g;constructor(e,t){this.#w=t,this.#g=e}get ecCodewords(){return this.#w}get dataCodewords(){return this.#g}}class B{#m;#v;constructor(e,t){const{length:n}=t;if(n<=0)throw new Error("polynomial coefficients cannot empty");if(this.#m=e,n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;if(e===n)this.#v=new Int32Array([0]);else{const r=new Int32Array(n-e);r.set(t.subarray(e)),this.#v=r}}else this.#v=t}get coefficients(){return this.#v}isZero(){return 0===this.#v[0]}getDegree(){return this.#v.length-1}getCoefficient(e){const t=this.#v;return t[t.length-1-e]}evaluate(e){if(0===e)return this.getCoefficient(0);let t;const n=this.#v;if(1===e){t=0;for(const e of n)t^=e;return t}[t]=n;const r=this.#m,{length:o}=n;for(let s=1;s<o;s++)t=r.multiply(e,t)^n[s];return t}multiply(e){const t=this.#m,n=this.#v,{length:r}=n;if(e instanceof B){if(this.isZero()||e.isZero())return t.zero;const o=e.#v,s=o.length,i=new Int32Array(r+s-1);for(let e=0;e<r;e++){const r=n[e];for(let n=0;n<s;n++)i[e+n]^=t.multiply(r,o[n])}return new B(t,i)}if(0===e)return t.zero;if(1===e)return this;const o=new Int32Array(r);for(let s=0;s<r;s++)o[s]=t.multiply(n[s],e);return new B(t,o)}multiplyByMonomial(e,t){const n=this.#m;if(0===t)return n.zero;const r=this.#v,{length:o}=r,s=new Int32Array(o+e);for(let e=0;e<o;e++)s[e]=n.multiply(r[e],t);return new B(n,s)}addOrSubtract(e){if(this.isZero())return e;if(e.isZero())return this;let t=e.#v,n=t.length,r=this.#v,o=r.length;n<o&&([n,o]=[o,n],[t,r]=[r,t]);const s=n-o,i=new Int32Array(n);i.set(t.subarray(0,s));for(let e=s;e<n;e++)i[e]=r[e-s]^t[e];return new B(this.#m,i)}divide(e){const t=this.#m;let n=t.zero,r=this;const o=e.getCoefficient(e.getDegree()),s=t.invert(o);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const o=r.getDegree(),i=o-e.getDegree(),a=t.multiply(r.getCoefficient(o),s),l=e.multiplyByMonomial(i,a),c=t.buildPolynomial(i,a);n=n.addOrSubtract(c),r=r.addOrSubtract(l)}return[n,r]}}const F=new class{#o;#y;#b;#_;#C;#S;constructor(e,t,n){let r=1;const o=new Int32Array(t);for(let n=0;n<t;n++)o[n]=r,r*=2,r>=t&&(r^=e,r&=t-1);const s=new Int32Array(t);for(let e=0,n=t-1;e<n;e++)s[o[e]]=e;this.#o=t,this.#C=o,this.#S=s,this.#_=n,this.#y=new B(this,new Int32Array([1])),this.#b=new B(this,new Int32Array([0]))}get size(){return this.#o}get one(){return this.#y}get zero(){return this.#b}get generator(){return this.#_}exp(e){return this.#C[e]}log(e){return this.#S[e]}invert(e){return this.#C[this.#o-this.#S[e]-1]}multiply(e,t){if(0===e||0===t)return 0;const n=this.#S;return this.#C[(n[e]+n[t])%(this.#o-1)]}buildPolynomial(e,t){if(0===t)return this.#b;const n=new Int32Array(e+1);return n[0]=t,new B(this,n)}}(285,256,0);class M{#m;#k;constructor(e=F){this.#m=e,this.#k=[new B(e,new Int32Array([1]))]}encode(e,t){const n=e.length-t,r=new Int32Array(n),o=function(e,t,n){const{length:r}=t;if(n>=r){const{generator:o}=e;let s=t[r-1];for(let i=r;i<=n;i++){const n=new Int32Array([1,e.exp(i-1+o)]),r=s.multiply(new B(e,n));t.push(r),s=r}}return t[n]}(this.#m,this.#k,t);r.set(e.subarray(0,n));const s=new B(this.#m,r).multiplyByMonomial(t,1),[,i]=s.divide(o),{coefficients:a}=i,l=n+(t-a.length);e.fill(0,n,l),e.set(a,l)}}function L(e,t){const n=e.length,r=new Int32Array(n+t);return r.set(e),(new M).encode(r,t),new Uint8Array(r.subarray(n))}function j(e){return e.mode===i.BYTE}function $(e){return e.mode===i.HANZI}function N(e,t){e.append(t.bits,4)}function q(e,t,n){if(j(t)){const[r]=t.charset.values;if(r!==n)return e.append(i.ECI.bits,4),r<=127?e.append(r,8):r<=16383?e.append(32768|r,16):e.append(12582912|r,24),r}return n}function H(e,t){const[n,r]=t;switch(n){case"GS1":N(e,i.FNC1_FIRST_POSITION);break;case"AIM":N(e,i.FNC1_SECOND_POSITION),e.append(r,8)}}function G(e,t){return j(e)?t.byteLength:e.content.length}function W(e,t,n,r){e.append(r,t.getCharacterCountBits(n))}function Q(e,t,n){const r=t.getECBlocks(n),o=Math.ceil(e/8);return r.numTotalDataCodewords>=o}function V(e,t){for(const n of k)if(Q(e,n,t))return n;throw new Error("data too big for all versions")}function Z(e,t){let n=0;for(const{mode:r,head:o,body:s}of e)n+=o.length+r.getCharacterCountBits(t)+s.length;return n}class K{#U;#E;#e;#x;#o;#A;#P;constructor(e){const t=1<<e,n=t+1;this.#U=t,this.#E=n,this.#x=e,this.reset()}get bof(){return this.#U}get eof(){return this.#E}get bits(){return this.#e}get depth(){return this.#x}reset(){const e=this.#x+1;this.#e=e,this.#o=1<<e,this.#P=new Map,this.#A=this.#E+1}add(e,t){let n=this.#A;if(n>4095)return!1;this.#P.set(e<<8|t,n++);let r=this.#e,o=this.#o;return n>o&&(o=1<<++r),this.#e=r,this.#o=o,this.#A=n,!0}get(e,t){return this.#P.get(e<<8|t)}}class X{#e=0;#O;#R=0;#s=[];constructor(e){this.#O=e}write(e){let t=this.#e,n=this.#R|e<<t;t+=this.#O.bits;const r=this.#s;for(;t>=8;)r.push(255&n),n>>=8,t-=8;this.#e=t,this.#R=n}pipe(e){const t=this.#s;this.#e>0&&t.push(this.#R),e.writeByte(this.#O.depth);const{length:n}=t;for(let r=0;r<n;){const o=n-r;o>=255?(e.writeByte(255),e.writeBytes(t,r,255),r+=255):(e.writeByte(o),e.writeBytes(t,r,o),r=n)}e.writeByte(0)}}class Y{#s=[];get bytes(){return this.#s}writeByte(e){this.#s.push(255&e)}writeInt16(e){this.#s.push(255&e,e>>8&255)}writeBytes(e,t=0,n=e.length){const r=this.#s;for(let o=0;o<n;o++)r.push(255&e[t+o])}}const{fromCharCode:J}=String;function ee(e){if((e&=63)>=0){if(e<26)return 65+e;if(e<52)return e-26+97;if(e<62)return e-52+48;if(62===e)return 43;if(63===e)return 47}throw new Error(`illegal char: ${J(e)}`)}class te{#e=0;#R=0;#n=0;#z=new Y;get bytes(){return this.#z.bytes}write(e){let t=this.#e+8;const n=this.#z,r=this.#R<<8|255&e;for(;t>=6;)n.writeByte(ee(r>>>t-6)),t-=6;this.#n++,this.#e=t,this.#R=r}close(){const e=this.#e,t=this.#z;e>0&&(t.writeByte(ee(this.#R<<6-e)),this.#e=0,this.#R=0);const n=this.#n;if(n%3!=0){const e=3-n%3;for(let n=0;n<e;n++)t.writeByte(61)}}}class ne{#I;#T;#D;#B;#F=[];constructor(e,t,{foreground:n=[0,0,0],background:r=[255,255,255]}={}){this.#I=e,this.#T=t,this.#D=n,this.#B=r}#M(){const e=this.#I,t=this.#T,n=new Y,r=this.#B,o=this.#D;return n.writeBytes([71,73,70,56,57,97]),n.writeInt16(e),n.writeInt16(t),n.writeBytes([128,0,0]),n.writeBytes([r[0],r[1],r[2]]),n.writeBytes([o[0],o[1],o[2]]),n.writeByte(44),n.writeInt16(0),n.writeInt16(0),n.writeInt16(e),n.writeInt16(t),n.writeByte(0),function(e,t,n){const r=new K(2),o=new X(r);if(o.write(r.bof),e.length>0){let t=e[0];const{length:n}=e;for(let s=1;s<n;s++){const n=e[s],i=r.get(t,n);null!=i?t=i:(o.write(t),r.add(t,n)||(o.write(r.bof),r.reset()),t=n)}o.write(t)}o.write(r.eof),o.pipe(n)}(this.#F,0,n),n.writeByte(59),n.bytes}set(e,t,n){this.#F[t*this.#I+e]=n}toDataURL(){const e=this.#M(),t=new te;for(const n of e)t.write(n);t.close();const n=t.bytes;let r="data:image/gif;base64,";for(const e of n)r+=J(e);return r}}class re{#L;#j;#p;#$;constructor(e,t,n,r){this.#L=r,this.#j=n,this.#$=e,this.#p=t}get size(){return this.#$.size}get mask(){return this.#L}get level(){return this.#j.name}get version(){return this.#p.version}get(e,t){const{size:n}=this.#$;if(e<0||t<0||e>=n||t>=n)throw new Error(`illegal coordinate: [${e}, ${t}]`);return this.#$.get(e,t)}toDataURL(e=2,{margin:t=4*e,...n}={}){e=Math.max(1,0|e),t=Math.max(0,0|t);const r=this.#$,o=e*r.size+2*t,s=new ne(o,o,n),i=o-t;for(let n=0;n<o;n++)for(let a=0;a<o;a++)if(a>=t&&a<i&&n>=t&&n<i){const o=l((a-t)/e),i=l((n-t)/e);s.set(a,n,r.get(o,i))}else s.set(a,n,0);return s.toDataURL()}}const oe=new Map;class se{#N;#q;static CP437=new se("cp437",2,0);static ISO_8859_1=new se("iso-8859-1",3,1);static ISO_8859_2=new se("iso-8859-2",4);static ISO_8859_3=new se("iso-8859-3",5);static ISO_8859_4=new se("iso-8859-4",6);static ISO_8859_5=new se("iso-8859-5",7);static ISO_8859_6=new se("iso-8859-6",8);static ISO_8859_7=new se("iso-8859-7",9);static ISO_8859_8=new se("iso-8859-8",10);static ISO_8859_9=new se("iso-8859-9",11);static ISO_8859_10=new se("iso-8859-10",12);static ISO_8859_11=new se("iso-8859-11",13);static ISO_8859_13=new se("iso-8859-13",15);static ISO_8859_14=new se("iso-8859-14",16);static ISO_8859_15=new se("iso-8859-15",17);static ISO_8859_16=new se("iso-8859-16",18);static SHIFT_JIS=new se("shift-jis",20);static CP1250=new se("cp1250",21);static CP1251=new se("cp1251",22);static CP1252=new se("cp1252",23);static CP1256=new se("cp1256",24);static UTF_16BE=new se("utf-16be",25);static UTF_8=new se("utf-8",26);static ASCII=new se("ascii",27);static BIG5=new se("big5",28);static GB2312=new se("gb2312",29);static EUC_KR=new se("euc-kr",30);static GBK=new se("gbk",31);static GB18030=new se("gb18030",32);static UTF_16LE=new se("utf-16le",33);static UTF_32BE=new se("utf-32be",34);static UTF_32LE=new se("utf-32le",35);static ISO_646_INV=new se("iso-646-inv",170);static BINARY=new se("binary",899);constructor(e,...t){this.#N=e,this.#q=Object.freeze(t);for(const e of t){if(!(e>=0&&e<=999999&&Number.isInteger(e)))throw new Error("illegal extended channel interpretation value");oe.set(e,this)}}get label(){return this.#N}get values(){return this.#q}}const ie=new Map;class ae{#H;#e;#j;static L=new ae("L",0,1);static M=new ae("M",1,0);static Q=new ae("Q",2,3);static H=new ae("H",3,2);constructor(e,t,n){this.#e=n,this.#H=e,this.#j=t,ie.set(n,this)}get bits(){return this.#e}get name(){return this.#H}get level(){return this.#j}}function le(e,t){const n=[];for(const r of e){const e=r.codePointAt(0);n.push(null==e||e>t?63:e)}return new Uint8Array(n)}function ce(e,t){switch(t){case se.ASCII:return le(e,127);case se.ISO_8859_1:return le(e,255);case se.UTF_8:return(new TextEncoder).encode(e);default:throw Error(`built-in encode not support charset: ${t.label}`)}}class ue{#G;#j;#M;#p;constructor({hints:e={},level:t="L",version:n="Auto",encode:r=ce}={}){!function(e){const{fnc1:t}=e;if(null!=t){const[e]=t;if("GS1"!==e&&"AIM"!==e)throw new Error("illegal fn1 hint");if("AIM"===e){const[,e]=t;if(e<0||e>255||!Number.isInteger(e))throw new Error("illegal fn1 application indicator")}}}(e),function(e){if(["L","M","Q","H"].indexOf(e)<0)throw new Error("illegal error correction level")}(t),function(e){if("Auto"!==e&&(e<1||e>40||!Number.isInteger(e)))throw new Error("illegal version")}(n),this.#G=e,this.#M=r,this.#p=n,this.#j=ae[t]}encode(...e){const t=this.#j,n=this.#M,{fnc1:r}=this.#G,o=this.#p,s=[];let i,a=!1,[l]=se.ISO_8859_1.values;for(const t of e){const{mode:e}=t,o=new y,i=t.encode(n),c=G(t,i);l=q(o,t,l),null==r||a||(a=!0,H(o,r)),N(o,e),$(t)&&o.append(1,4),s.push({mode:e,head:o,body:i,length:c})}if("Auto"===o)i=function(e,t){const n=V(Z(e,k[0]),t);return V(Z(e,n),t)}(s,t);else if(i=k[o-1],!Q(Z(s,i),i,t))throw new Error("data too big for requested version");const c=new y;for(const{mode:e,head:t,body:n,length:r}of s)c.append(t),W(c,e,i,r),c.append(n);const u=i.getECBlocks(t);!function(e,t){const n=8*t;for(let t=0;t<4&&e.length<n;t++)e.append(0);const r=7&e.length;if(r>0)for(let t=r;t<8;t++)e.append(0);const o=t-e.byteLength;for(let t=0;t<o;t++)e.append(1&t?17:236,8)}(c,u.numTotalDataCodewords);const f=function(e,{ecBlocks:t,numECCodewordsPerBlock:n}){let r=0,o=0,s=0;const i=[];for(const{count:a,numDataCodewords:l}of t)for(let t=0;t<a;t++){const t=new Uint8Array(l);e.writeToUint8Array(8*s,t,0,l);const a=L(t,n);i.push(new D(t,a)),s+=l,r=Math.max(r,a.length),o=Math.max(o,l)}const a=new y;for(let e=0;e<o;e++)for(const{dataCodewords:t}of i)e<t.length&&a.append(t[e],8);for(let e=0;e<r;e++)for(const{ecCodewords:t}of i)e<t.length&&a.append(t[e],8);return a}(c,u),[d,p]=function(e,t,n){let r=0,o=T(e,t,n,r),s=w(o);for(let i=1;i<8;i++){const a=T(e,t,n,i),l=w(a);l<s&&(r=i,o=a,s=l)}return[r,o]}(f,i,t);return new re(p,i,t,d)}}class fe{#W;#Q;constructor(e,t=se.ISO_8859_1){!function(e){if(""===e)throw new Error("segment content should be at least 1 character")}(e),function(e){if(!(e instanceof se))throw new Error("illegal charset")}(t),this.#W=e,this.#Q=t}get mode(){return i.BYTE}get content(){return this.#W}get charset(){return this.#Q}encode(e){const t=new y,n=e(this.#W,this.#Q);for(const e of n)t.append(e,8);return t}}var de=("undefined"!=typeof window?window:void 0!==n.g?n.g:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function pe(e,t){if(void 0===t&&(t=[]),null===e||"object"!=typeof e)return e;var n,r=(n=function(t){return t.original===e},t.filter(n)[0]);if(r)return r.copy;var o=Array.isArray(e)?[]:{};return t.push({original:e,copy:o}),Object.keys(e).forEach((function(n){o[n]=pe(e[n],t)})),o}function he(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function we(e){return null!==e&&"object"==typeof e}var ge=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"==typeof n?n():n)||{}},me={namespaced:{configurable:!0}};me.namespaced.get=function(){return!!this._rawModule.namespaced},ge.prototype.addChild=function(e,t){this._children[e]=t},ge.prototype.removeChild=function(e){delete this._children[e]},ge.prototype.getChild=function(e){return this._children[e]},ge.prototype.hasChild=function(e){return e in this._children},ge.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},ge.prototype.forEachChild=function(e){he(this._children,e)},ge.prototype.forEachGetter=function(e){this._rawModule.getters&&he(this._rawModule.getters,e)},ge.prototype.forEachAction=function(e){this._rawModule.actions&&he(this._rawModule.actions,e)},ge.prototype.forEachMutation=function(e){this._rawModule.mutations&&he(this._rawModule.mutations,e)},Object.defineProperties(ge.prototype,me);var ve,ye=function(e){this.register([],e,!1)};function be(e,t,n){if(t.update(n),n.modules)for(var r in n.modules){if(!t.getChild(r))return;be(e.concat(r),t.getChild(r),n.modules[r])}}ye.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},ye.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return e+((t=t.getChild(n)).namespaced?n+"/":"")}),"")},ye.prototype.update=function(e){be([],this.root,e)},ye.prototype.register=function(e,t,n){var r=this;void 0===n&&(n=!0);var o=new ge(t,n);0===e.length?this.root=o:this.get(e.slice(0,-1)).addChild(e[e.length-1],o),t.modules&&he(t.modules,(function(t,o){r.register(e.concat(o),t,n)}))},ye.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],r=t.getChild(n);r&&r.runtime&&t.removeChild(n)},ye.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};var _e=function(e){var t=this;void 0===e&&(e={}),!ve&&"undefined"!=typeof window&&window.Vue&&Pe(window.Vue);var n=e.plugins;void 0===n&&(n=[]);var r=e.strict;void 0===r&&(r=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ye(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new ve,this._makeLocalGettersCache=Object.create(null);var o=this,s=this.dispatch,i=this.commit;this.dispatch=function(e,t){return s.call(o,e,t)},this.commit=function(e,t,n){return i.call(o,e,t,n)},this.strict=r;var a=this._modules.root.state;Ee(this,a,[],this._modules.root),Ue(this,a),n.forEach((function(e){return e(t)})),(void 0!==e.devtools?e.devtools:ve.config.devtools)&&function(e){de&&(e._devtoolHook=de,de.emit("vuex:init",e),de.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){de.emit("vuex:mutation",e,t)}),{prepend:!0}),e.subscribeAction((function(e,t){de.emit("vuex:action",e,t)}),{prepend:!0}))}(this)},Ce={state:{configurable:!0}};function Se(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function ke(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;Ee(e,n,[],e._modules.root,!0),Ue(e,n,t)}function Ue(e,t,n){var r=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var o=e._wrappedGetters,s={};he(o,(function(t,n){s[n]=function(e,t){return function(){return e(t)}}(t,e),Object.defineProperty(e.getters,n,{get:function(){return e._vm[n]},enumerable:!0})}));var i=ve.config.silent;ve.config.silent=!0,e._vm=new ve({data:{$$state:t},computed:s}),ve.config.silent=i,e.strict&&function(e){e._vm.$watch((function(){return this._data.$$state}),(function(){}),{deep:!0,sync:!0})}(e),r&&(n&&e._withCommit((function(){r._data.$$state=null})),ve.nextTick((function(){return r.$destroy()})))}function Ee(e,t,n,r,o){var s=!n.length,i=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[i],e._modulesNamespaceMap[i]=r),!s&&!o){var a=xe(t,n.slice(0,-1)),l=n[n.length-1];e._withCommit((function(){ve.set(a,l,r.state)}))}var c=r.context=function(e,t,n){var r=""===t,o={dispatch:r?e.dispatch:function(n,r,o){var s=Ae(n,r,o),i=s.payload,a=s.options,l=s.type;return a&&a.root||(l=t+l),e.dispatch(l,i)},commit:r?e.commit:function(n,r,o){var s=Ae(n,r,o),i=s.payload,a=s.options,l=s.type;a&&a.root||(l=t+l),e.commit(l,i,a)}};return Object.defineProperties(o,{getters:{get:r?function(){return e.getters}:function(){return function(e,t){if(!e._makeLocalGettersCache[t]){var n={},r=t.length;Object.keys(e.getters).forEach((function(o){if(o.slice(0,r)===t){var s=o.slice(r);Object.defineProperty(n,s,{get:function(){return e.getters[o]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}(e,t)}},state:{get:function(){return xe(e.state,n)}}}),o}(e,i,n);r.forEachMutation((function(t,n){!function(e,t,n,r){(e._mutations[t]||(e._mutations[t]=[])).push((function(t){n.call(e,r.state,t)}))}(e,i+n,t,c)})),r.forEachAction((function(t,n){var r=t.root?n:i+n,o=t.handler||t;!function(e,t,n,r){(e._actions[t]||(e._actions[t]=[])).push((function(t){var o,s=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},t);return(o=s)&&"function"==typeof o.then||(s=Promise.resolve(s)),e._devtoolHook?s.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):s}))}(e,r,o,c)})),r.forEachGetter((function(t,n){!function(e,t,n,r){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return n(r.state,r.getters,e.state,e.getters)})}(e,i+n,t,c)})),r.forEachChild((function(r,s){Ee(e,t,n.concat(s),r,o)}))}function xe(e,t){return t.reduce((function(e,t){return e[t]}),e)}function Ae(e,t,n){return we(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}function Pe(e){ve&&e===ve||function(e){if(Number(e.version.split(".")[0])>=2)e.mixin({beforeCreate:n});else{var t=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[n].concat(e.init):n,t.call(this,e)}}function n(){var e=this.$options;e.store?this.$store="function"==typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}(ve=e)}Ce.state.get=function(){return this._vm._data.$$state},Ce.state.set=function(e){},_e.prototype.commit=function(e,t,n){var r=this,o=Ae(e,t,n),s=o.type,i=o.payload,a=(o.options,{type:s,payload:i}),l=this._mutations[s];l&&(this._withCommit((function(){l.forEach((function(e){e(i)}))})),this._subscribers.slice().forEach((function(e){return e(a,r.state)})))},_e.prototype.dispatch=function(e,t){var n=this,r=Ae(e,t),o=r.type,s=r.payload,i={type:o,payload:s},a=this._actions[o];if(a){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(i,n.state)}))}catch(e){}var l=a.length>1?Promise.all(a.map((function(e){return e(s)}))):a[0](s);return new Promise((function(e,t){l.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(i,n.state)}))}catch(e){}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(i,n.state,e)}))}catch(e){}t(e)}))}))}},_e.prototype.subscribe=function(e,t){return Se(e,this._subscribers,t)},_e.prototype.subscribeAction=function(e,t){return Se("function"==typeof e?{before:e}:e,this._actionSubscribers,t)},_e.prototype.watch=function(e,t,n){var r=this;return this._watcherVM.$watch((function(){return e(r.state,r.getters)}),t,n)},_e.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._vm._data.$$state=e}))},_e.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),Ee(this,this.state,e,this._modules.get(e),n.preserveState),Ue(this,this.state)},_e.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var n=xe(t.state,e.slice(0,-1));ve.delete(n,e[e.length-1])})),ke(this)},_e.prototype.hasModule=function(e){return"string"==typeof e&&(e=[e]),this._modules.isRegistered(e)},_e.prototype.hotUpdate=function(e){this._modules.update(e),ke(this,!0)},_e.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(_e.prototype,Ce);var Oe=De((function(e,t){var n={};return Te(t).forEach((function(t){var r=t.key,o=t.val;n[r]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var r=Be(this.$store,0,e);if(!r)return;t=r.context.state,n=r.context.getters}return"function"==typeof o?o.call(this,t,n):t[o]},n[r].vuex=!0})),n})),Re=De((function(e,t){var n={};return Te(t).forEach((function(t){var r=t.key,o=t.val;n[r]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=this.$store.commit;if(e){var s=Be(this.$store,0,e);if(!s)return;r=s.context.commit}return"function"==typeof o?o.apply(this,[r].concat(t)):r.apply(this.$store,[o].concat(t))}})),n})),ze=De((function(e,t){var n={};return Te(t).forEach((function(t){var r=t.key,o=t.val;o=e+o,n[r]=function(){if(!e||Be(this.$store,0,e))return this.$store.getters[o]},n[r].vuex=!0})),n})),Ie=De((function(e,t){var n={};return Te(t).forEach((function(t){var r=t.key,o=t.val;n[r]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=this.$store.dispatch;if(e){var s=Be(this.$store,0,e);if(!s)return;r=s.context.dispatch}return"function"==typeof o?o.apply(this,[r].concat(t)):r.apply(this.$store,[o].concat(t))}})),n}));function Te(e){return function(e){return Array.isArray(e)||we(e)}(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function De(e){return function(t,n){return"string"!=typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function Be(e,t,n){return e._modulesNamespaceMap[n]}function Fe(e,t,n){var r=n?e.groupCollapsed:e.group;try{r.call(e,t)}catch(n){e.log(t)}}function Me(e){try{e.groupEnd()}catch(t){e.log("—— log end ——")}}function Le(){var e=new Date;return" @ "+je(e.getHours(),2)+":"+je(e.getMinutes(),2)+":"+je(e.getSeconds(),2)+"."+je(e.getMilliseconds(),3)}function je(e,t){return n=t-e.toString().length,new Array(n+1).join("0")+e;var n}var $e={Store:_e,install:Pe,version:"3.6.2",mapState:Oe,mapMutations:Re,mapGetters:ze,mapActions:Ie,createNamespacedHelpers:function(e){return{mapState:Oe.bind(null,e),mapGetters:ze.bind(null,e),mapMutations:Re.bind(null,e),mapActions:Ie.bind(null,e)}},createLogger:function(e){void 0===e&&(e={});var t=e.collapsed;void 0===t&&(t=!0);var n=e.filter;void 0===n&&(n=function(e,t,n){return!0});var r=e.transformer;void 0===r&&(r=function(e){return e});var o=e.mutationTransformer;void 0===o&&(o=function(e){return e});var s=e.actionFilter;void 0===s&&(s=function(e,t){return!0});var i=e.actionTransformer;void 0===i&&(i=function(e){return e});var a=e.logMutations;void 0===a&&(a=!0);var l=e.logActions;void 0===l&&(l=!0);var c=e.logger;return void 0===c&&(c=console),function(e){var u=pe(e.state);void 0!==c&&(a&&e.subscribe((function(e,s){var i=pe(s);if(n(e,u,i)){var a=Le(),l=o(e),f="mutation "+e.type+a;Fe(c,f,t),c.log("%c prev state","color: #9E9E9E; font-weight: bold",r(u)),c.log("%c mutation","color: #03A9F4; font-weight: bold",l),c.log("%c next state","color: #4CAF50; font-weight: bold",r(i)),Me(c)}u=i})),l&&e.subscribeAction((function(e,n){if(s(e,n)){var r=Le(),o=i(e),a="action "+e.type+r;Fe(c,a,t),c.log("%c action","color: #03A9F4; font-weight: bold",o),Me(c)}})))}}};const Ne=$e;n(560);const qe={_pattern:/[A-Z0-9_\-+!]/,_getRandomByte:function(){const e=new Uint8Array(1);let t=window.msCrypto;return t||(t=window.crypto),t.getRandomValues(e),e[0]},generate:function(e){let t=window.msCrypto;return t||(t=window.crypto),t&&t.getRandomValues?Array.apply(null,{length:e}).map((function(){let e;for(;;)if(e=String.fromCharCode(this._getRandomByte()),this._pattern.test(e))return e}),this).join(""):""}},He={name:"Settings",computed:Oe({config:"config",disabled:"disabled",retention:e=>e.upload.retention,password:e=>e.upload.password}),methods:{generatePassword(){this.disabled||this.$store.commit("upload/PASSWORD",qe.generate(10))}}};var Ge=n(486);const We=(0,Ge.A)(He,(function(){var e=this,t=e._self._c;return e.config&&e.config.retentions?t("div",[t("div",{staticClass:"panel panel-default",class:{"panel-info":!e.disabled}},[t("div",{staticClass:"panel-heading"},[t("strong",[e._v(e._s(e.$root.lang.settings))])]),t("div",{staticClass:"panel-body"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"retention"}},[e._v(e._s(e.$root.lang.retention))]),t("select",{staticClass:"form-control",attrs:{id:"retention",disabled:e.disabled},domProps:{value:e.retention},on:{change:function(t){return e.$store.commit("upload/RETENTION",t.target.value)}}},e._l(e.config.retentions,(function(n,r){return t("option",{domProps:{value:r,selected:r===e.retention}},[e._v(e._s(e.$root.lang.retentions[r]||n))])})),0)]),t("div",[t("label",{attrs:{for:"password"}},[e._v(e._s(e.$root.lang.password))]),t("div",{staticClass:"input-group",class:{"has-error":e.config.requireBucketPassword&&!e.password}},[t("input",{staticClass:"form-control",attrs:{id:"password",type:"text",disabled:e.disabled,placeholder:e.config.requireBucketPassword?e.$root.lang.required:e.$root.lang.optional,required:"config.requireBucketPassword"},domProps:{value:e.password},on:{input:function(t){return e.$store.commit("upload/PASSWORD",t.target.value)}}}),t("span",{staticClass:"input-group-addon",staticStyle:{cursor:"pointer"},attrs:{title:e.$root.lang.generateRandomPassword,tabindex:"0",role:"button"},on:{click:function(t){return e.generatePassword()},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.generatePassword())},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:(t.preventDefault(),e.generatePassword())}]}},[t("icon",{attrs:{name:"key"}})],1)])])])])]):e._e()}),[],!1,null,null,null).exports;var Qe=n(628),Ve=n.n(Qe),Ze=(n(211),n(842));Ze.A.register({plus:{width:448,height:512,paths:[{d:"M416 208c17.7 0 32 14.3 32 32v32c0 17.7-14.3 32-32 32h-144v144c0 17.7-14.3 32-32 32h-32c-17.7 0-32-14.3-32-32v-144h-144c-17.7 0-32-14.3-32-32v-32c0-17.7 14.3-32 32-32h144v-144c0-17.7 14.3-32 32-32h32c17.7 0 32 14.3 32 32v144h144z"}]}}),Ze.A.register({"plus-circle":{width:512,height:512,paths:[{d:"M256 8c137 0 248 111 248 248s-111 248-248 248-248-111-248-248 111-248 248-248zM400 284v-56c0-6.6-5.4-12-12-12h-92v-92c0-6.6-5.4-12-12-12h-56c-6.6 0-12 5.4-12 12v92h-92c-6.6 0-12 5.4-12 12v56c0 6.6 5.4 12 12 12h92v92c0 6.6 5.4 12 12 12h56c6.6 0 12-5.4 12-12v-92h92c6.6 0 12-5.4 12-12z"}]}}),Ze.A.register({times:{width:352,height:512,paths:[{d:"M242.7 256l100.1 100.1c12.3 12.3 12.3 32.2 0 44.5l-22.2 22.2c-12.3 12.3-32.2 12.3-44.5 0l-100.1-100.1-100.1 100.1c-12.3 12.3-32.2 12.3-44.5 0l-22.2-22.2c-12.3-12.3-12.3-32.2 0-44.5l100.1-100.1-100.1-100.1c-12.3-12.3-12.3-32.2 0-44.5l22.2-22.2c12.3-12.3 32.2-12.3 44.5 0l100.1 100.1 100.1-100.1c12.3-12.3 32.2-12.3 44.5 0l22.2 22.2c12.3 12.3 12.3 32.2 0 44.5z"}]}}),n(280),n(908),n(434),n(98),n(843),n(183),n(207);const Ke={props:["file"],computed:{iconClass(){const e=this.file.type||this.file.metadata&&this.file.metadata.type;return e?e.startsWith("image")?"regular/file-image":e.startsWith("text")?"regular/file-alt":e.startsWith("video")?"regular/file-video":e.startsWith("audio")?"regular/file-audio":"application/pdf"===e?"regular/file-pdf":e.startsWith("application")?"regular/file-archive":"regular/file":"regular/file"},isImageBlob(){return!(!URL&&!webkitURL)&&this.file instanceof File&&this.file.type.startsWith("image")},blobUrl(){if(this.isImageBlob)return(URL||webkitURL).createObjectURL(this.file)}}},Xe=(0,Ge.A)(Ke,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"file-icon"},[e.isImageBlob?e._e():t("icon",{attrs:{name:e.iconClass,scale:"3"}}),e.isImageBlob?t("img",{attrs:{src:e.blobUrl}}):e._e()],1)}),[],!1,null,null,null).exports;var Ye=n(751),Je=n.n(Ye),et=n(614),tt=n(519),nt=n.n(tt);function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function ot(e){var t="function"==typeof Map?new Map:void 0;return ot=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return st(e,arguments,lt(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),at(r,e)},ot(e)}function st(e,t,n){return st=it()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&at(o,n.prototype),o},st.apply(null,arguments)}function it(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function at(e,t){return at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},at(e,t)}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}const ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}(o,e);var t,n,r=(t=o,n=it(),function(){var e,r=lt(t);if(n){var o=lt(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){return!t||"object"!==rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).originalRequest=s,t.originalResponse=i,t.causingError=n,null!=n&&(e+=", caused by ".concat(n.toString())),null!=s){var a=s.getHeader("X-Request-ID")||"n/a",l=s.getMethod(),c=s.getURL(),u=i?i.getStatus():"n/a",f=i?i.getBody()||"":"n/a";e+=", originated from request (method: ".concat(l,", url: ").concat(c,", response code: ").concat(u,", response text: ").concat(f,", request id: ").concat(a,")")}return t.message=e,t}return o}(ot(Error));function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){dt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ht=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"resume"in n&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=n,this.options.chunkSize=+this.options.chunkSize,this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}var t,n,r;return t=e,n=[{key:"findPreviousUploads",value:function(){var e=this;return this.options.fingerprint(this.file,this.options).then((function(t){return e._urlStorage.findUploadsByFingerprint(t)}))}},{key:"resumeFromPreviousUpload",value:function(e){this.url=e.uploadUrl||null,this._parallelUploadUrls=e.parallelUploadUrls||null,this._urlStorageKey=e.urlStorageKey}},{key:"start",value:function(){var e=this,t=this.file;if(t)if(this.options.endpoint||this.options.uploadUrl){var n=this.options.retryDelays;null==n||"[object Array]"===Object.prototype.toString.call(n)?(this.options.parallelUploads>1&&["uploadUrl","uploadSize","uploadLengthDeferred"].forEach((function(t){e.options[t]&&e._emitError(new Error("tus: cannot use the ".concat(t," option when parallelUploads is enabled")))})),this.options.fingerprint(t,this.options).then((function(n){return null==n||"Calculated fingerprint: ".concat(n),e._fingerprint=n,e._source?e._source:e.options.fileReader.openFile(t,e.options.chunkSize)})).then((function(t){e._source=t,e.options.parallelUploads>1||null!=e._parallelUploadUrls?e._startParallelUpload():e._startSingleUpload()})).catch((function(t){e._emitError(t)}))):this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var t=this,n=this._size=this._source.size,r=0;this._parallelUploads=[];var o=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,s=function(e,t,n){for(var r=Math.floor(e/t),o=[],s=0;s<t;s++)o.push({start:r*s,end:r*(s+1)});return o[t-1].end=e,n&&o.forEach((function(e,t){e.uploadUrl=n[t]||null})),o}(this._source.size,o,this._parallelUploadUrls);this._parallelUploadUrls=new Array(s.length);var i,a=s.map((function(o,i){var a=0;return t._source.slice(o.start,o.end).then((function(l){var c=l.value;return new Promise((function(l,u){var f=ft(ft({},t.options),{},{uploadUrl:o.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,metadata:{},headers:ft(ft({},t.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:l,onError:u,onProgress:function(e){r=r-a+e,a=e,t._emitProgress(r,n)},_onUploadUrlAvailable:function(){t._parallelUploadUrls[i]=d.url,t._parallelUploadUrls.filter((function(e){return!!e})).length===s.length&&t._saveUploadInUrlStorage()}}),d=new e(c,f);d.start(),t._parallelUploads.push(d)}))}))}));Promise.all(a).then((function(){(i=t._openRequest("POST",t.options.endpoint)).setHeader("Upload-Concat","final;".concat(t._parallelUploadUrls.join(" ")));var e=wt(t.options.metadata);return""!==e&&i.setHeader("Upload-Metadata",e),t._sendRequest(i,null)})).then((function(e){if(gt(e.getStatus(),200)){var n=e.getHeader("Location");null!=n?(t.url=bt(t.options.endpoint,n),"Created upload at ".concat(t.url),t._emitSuccess()):t._emitHttpError(i,e,"tus: invalid or missing Location header")}else t._emitHttpError(i,e,"tus: unexpected response while creating upload")})).catch((function(e){t._emitError(e)}))}},{key:"_startSingleUpload",value:function(){if(this.options.uploadLengthDeferred)this._size=null;else if(null!=this.options.uploadSize){if(this._size=+this.options.uploadSize,isNaN(this._size))return void this._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(this._size=this._source.size,null==this._size)return void this._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));return this._aborted=!1,null!=this.url?("Resuming upload from previous URL: ".concat(this.url),void this._resumeUpload()):null!=this.options.uploadUrl?("Resuming upload from provided URL: ".concat(this.options.uploadUrl),this.url=this.options.uploadUrl,void this._resumeUpload()):void this._createUpload()}},{key:"abort",value:function(t){var n=this;if(arguments.length>1&&"function"==typeof arguments[1])throw new Error("tus: the abort function does not accept a callback since v2 anymore; please use the returned Promise instead");return null!=this._parallelUploads&&this._parallelUploads.forEach((function(e){e.abort(t)})),null!==this._req&&(this._req.abort(),this._source.close()),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),t&&null!=this.url?e.terminate(this.url,this.options).then((function(){return n._removeFromUrlStorage()})):Promise.resolve()}},{key:"_emitHttpError",value:function(e,t,n,r){this._emitError(new ct(n,r,e,t))}},{key:"_emitError",value:function(e){var t=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),yt(e,this._retryAttempt,this.options))){var n=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout((function(){t.start()}),n))}if("function"!=typeof this.options.onError)throw e;this.options.onError(e)}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){"function"==typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,n){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,n)}},{key:"_createUpload",value:function(){var e=this;if(this.options.endpoint){var t=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?t.setHeader("Upload-Defer-Length",1):t.setHeader("Upload-Length",this._size);var n,r=wt(this.options.metadata);""!==r&&t.setHeader("Upload-Metadata",r),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,n=this._addChunkToRequest(t)):n=this._sendRequest(t,null),n.then((function(n){if(gt(n.getStatus(),200)){var r=n.getHeader("Location");if(null!=r){if(e.url=bt(e.options.endpoint,r),"Created upload at ".concat(e.url),"function"==typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),0===e._size)return e._emitSuccess(),void e._source.close();e._saveUploadInUrlStorage(),e.options.uploadDataDuringCreation?e._handleUploadResponse(t,n):(e._offset=0,e._performUpload())}else e._emitHttpError(t,n,"tus: invalid or missing Location header")}else e._emitHttpError(t,n,"tus: unexpected response while creating upload")})).catch((function(n){e._emitHttpError(t,null,"tus: failed to create upload",n)}))}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var e=this,t=this._openRequest("HEAD",this.url);this._sendRequest(t,null).then((function(n){var r=n.getStatus();if(!gt(r,200))return gt(r,400)&&e._removeFromUrlStorage(),423===r?void e._emitHttpError(t,n,"tus: upload is currently locked; retry later"):e.options.endpoint?(e.url=null,void e._createUpload()):void e._emitHttpError(t,n,"tus: unable to resume upload (new upload cannot be created without an endpoint)");var o=parseInt(n.getHeader("Upload-Offset"),10);if(isNaN(o))e._emitHttpError(t,n,"tus: invalid or missing offset value");else{var s=parseInt(n.getHeader("Upload-Length"),10);if(!isNaN(s)||e.options.uploadLengthDeferred){if("function"==typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),o===s)return e._emitProgress(s,s),void e._emitSuccess();e._offset=o,e._performUpload()}else e._emitHttpError(t,n,"tus: invalid or missing length value")}})).catch((function(n){e._emitHttpError(t,null,"tus: failed to resume upload",n)}))}},{key:"_performUpload",value:function(){var e,t=this;this._aborted||(this.options.overridePatchMethod?(e=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):e=this._openRequest("PATCH",this.url),e.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(e).then((function(n){gt(n.getStatus(),200)?t._handleUploadResponse(e,n):t._emitHttpError(e,n,"tus: unexpected response while uploading chunk")})).catch((function(n){t._aborted||t._emitHttpError(e,null,"tus: failed to upload chunk at offset ".concat(t._offset),n)})))}},{key:"_addChunkToRequest",value:function(e){var t=this,n=this._offset,r=this._offset+this.options.chunkSize;return e.setProgressHandler((function(e){t._emitProgress(n+e,t._size)})),e.setHeader("Content-Type","application/offset+octet-stream"),(r===1/0||r>this._size)&&!this.options.uploadLengthDeferred&&(r=this._size),this._source.slice(n,r).then((function(n){var r=n.value,o=n.done;return t.options.uploadLengthDeferred&&o&&(t._size=t._offset+(r&&r.size?r.size:0),e.setHeader("Upload-Length",t._size)),null===r?t._sendRequest(e):(t._emitProgress(t._offset,t._size),t._sendRequest(e,r))}))}},{key:"_handleUploadResponse",value:function(e,t){var n=parseInt(t.getHeader("Upload-Offset"),10);if(isNaN(n))this._emitHttpError(e,t,"tus: invalid or missing offset value");else{if(this._emitProgress(n,this._size),this._emitChunkComplete(n-this._offset,n,this._size),this._offset=n,n==this._size)return this._emitSuccess(),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function(e,t){var n=mt(e,t,this.options);return this._req=n,n}},{key:"_removeFromUrlStorage",value:function(){var e=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch((function(t){e._emitError(t)})),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var e=this;if(this.options.storeFingerprintForResuming&&this._fingerprint){var t={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};this._parallelUploads?t.parallelUploadUrls=this._parallelUploadUrls:t.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,t).then((function(t){return e._urlStorageKey=t})).catch((function(t){e._emitError(t)}))}}},{key:"_sendRequest",value:function(e){return vt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,this.options)}}],r=[{key:"terminate",value:function(t,n){if(arguments.length>1&&"function"==typeof arguments[arguments.length-1])throw new Error("tus: the terminate function does not accept a callback since v2 anymore; please use the returned Promise instead");void 0===n&&(n={});var r=mt("DELETE",t,n);return vt(r,null,n).then((function(e){if(204!==e.getStatus())throw new ct("tus: unexpected response while terminating upload",null,r,e)})).catch((function(o){if(o instanceof ct||(o=new ct("tus: failed to terminate upload",o,r,null)),!yt(o,0,n))throw o;var s=n.retryDelays[0],i=n.retryDelays.slice(1),a=ft(ft({},n),{},{retryDelays:i});return new Promise((function(e){return setTimeout(e,s)})).then((function(){return e.terminate(t,a)}))}))}}],n&&pt(t.prototype,n),r&&pt(t,r),e}();function wt(e){var t=[];for(var n in e)t.push("".concat(n," ").concat(et.Base64.encode(e[n])));return t.join(",")}function gt(e,t){return e>=t&&e<t+100}function mt(e,t,n){var r=n.httpStack.createRequest(e,t);r.setHeader("Tus-Resumable","1.0.0");var o=n.headers||{};for(var s in o)r.setHeader(s,o[s]);if(n.addRequestId){var i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}));r.setHeader("X-Request-ID",i)}return r}function vt(e,t,n){return("function"==typeof n.onBeforeRequest?Promise.resolve(n.onBeforeRequest(e)):Promise.resolve()).then((function(){return e.send(t).then((function(t){return("function"==typeof n.onAfterResponse?Promise.resolve(n.onAfterResponse(e,t)):Promise.resolve()).then((function(){return t}))}))}))}function yt(e,t,n){if(null==n.retryDelays||t>=n.retryDelays.length||null==e.originalRequest)return!1;if(n&&"function"==typeof n.onShouldRetry)return n.onShouldRetry(e,t,n);var r,o=e.originalResponse?e.originalResponse.getStatus():0;return(!gt(o,400)||409===o||423===o)&&(r=!0,"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(r=!1),r)}function bt(e,t){return new(nt())(t,e).toString()}ht.defaultOptions={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,_onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null};const _t=ht;function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var St=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(e){return Promise.resolve([])}},{key:"removeUpload",value:function(e){return Promise.resolve()}},{key:"addUpload",value:function(e,t){return Promise.resolve(null)}}])&&Ct(t.prototype,n),e}();function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ut=!1;try{Ut="localStorage"in window;var Et="tusSupport";localStorage.setItem(Et,localStorage.getItem(Et))}catch(e){if(e.code!==e.SECURITY_ERR&&e.code!==e.QUOTA_EXCEEDED_ERR)throw e;Ut=!1}var xt=Ut,At=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"findAllUploads",value:function(){var e=this._findEntries("tus::");return Promise.resolve(e)}},{key:"findUploadsByFingerprint",value:function(e){var t=this._findEntries("tus::".concat(e,"::"));return Promise.resolve(t)}},{key:"removeUpload",value:function(e){return localStorage.removeItem(e),Promise.resolve()}},{key:"addUpload",value:function(e,t){var n=Math.round(1e12*Math.random()),r="tus::".concat(e,"::").concat(n);return localStorage.setItem(r,JSON.stringify(t)),Promise.resolve(r)}},{key:"_findEntries",value:function(e){for(var t=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);if(0===r.indexOf(e))try{var o=JSON.parse(localStorage.getItem(r));o.urlStorageKey=r,t.push(o)}catch(e){}}return t}}],n&&kt(t.prototype,n),e}();function Pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rt(e,t,n){return t&&Ot(e.prototype,t),n&&Ot(e,n),e}var zt=function(){function e(){Pt(this,e)}return Rt(e,[{key:"createRequest",value:function(e,t){return new It(e,t)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),e}(),It=function(){function e(t,n){Pt(this,e),this._xhr=new XMLHttpRequest,this._xhr.open(t,n,!0),this._method=t,this._url=n,this._headers={}}return Rt(e,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(e,t){this._xhr.setRequestHeader(e,t),this._headers[e]=t}},{key:"getHeader",value:function(e){return this._headers[e]}},{key:"setProgressHandler",value:function(e){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(t){t.lengthComputable&&e(t.loaded)})}},{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(n,r){e._xhr.onload=function(){n(new Tt(e._xhr))},e._xhr.onerror=function(e){r(e)},e._xhr.send(t)}))}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),Tt=function(){function e(t){Pt(this,e),this._xhr=t}return Rt(e,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(e){return this._xhr.getResponseHeader(e)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}();const Dt=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};function Bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ft=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._file=t,this.size=t.size}var t,n;return t=e,(n=[{key:"slice",value:function(e,t){if("undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova))return n=this._file.slice(e,t),new Promise((function(e,t){var r=new FileReader;r.onload=function(){var t=new Uint8Array(r.result);e({value:t})},r.onerror=function(e){t(e)},r.readAsArrayBuffer(n)}));var n,r=this._file.slice(e,t);return Promise.resolve({value:r})}},{key:"close",value:function(){}}])&&Bt(t.prototype,n),e}();function Mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lt(e){return void 0===e?0:void 0!==e.size?e.size:e.length}var jt=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._chunkSize=n,this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}var t,n;return t=e,(n=[{key:"slice",value:function(e,t){return e<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(e,t)}},{key:"_readUntilEnoughDataOrDone",value:function(e,t){var n=this,r=t<=this._bufferOffset+Lt(this._buffer);if(this._done||r){var o=this._getDataFromBuffer(e,t),s=null==o&&this._done;return Promise.resolve({value:o,done:s})}return this._reader.read().then((function(r){var o=r.value;return r.done?n._done=!0:void 0===n._buffer?n._buffer=o:n._buffer=function(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}throw new Error("Unknown data type")}(n._buffer,o),n._readUntilEnoughDataOrDone(e,t)}))}},{key:"_getDataFromBuffer",value:function(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var n=0===Lt(this._buffer);return this._done&&n?null:this._buffer.slice(0,t-e)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}])&&Mt(t.prototype,n),e}();function $t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Nt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"openFile",value:function(e,t){return Dt()&&e&&void 0!==e.uri?(n=e.uri,new Promise((function(e,t){var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){var t=r.response;e(t)},r.onerror=function(e){t(e)},r.open("GET",n),r.send()}))).then((function(e){return new Ft(e)})).catch((function(e){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(e))})):"function"==typeof e.slice&&void 0!==e.size?Promise.resolve(new Ft(e)):"function"==typeof e.read?(t=+t,isFinite(t)?Promise.resolve(new jt(e,t)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"));var n}}])&&$t(t.prototype,n),e}();function qt(e){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(e)}function Ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gt(e,t){return Gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Gt(e,t)}function Wt(e){return Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Wt(e)}function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(n),!0).forEach((function(t){Zt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kt=Vt(Vt({},_t.defaultOptions),{},{httpStack:new zt,fileReader:new Nt,urlStorage:xt?new At:new St,fingerprint:function(e,t){return Dt()?Promise.resolve(function(e,t){var n=e.exif?function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",n,t.endpoint].join("/")}(e,t)):Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))}}),Xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gt(e,t)}(i,e);var t,n,r,o,s=(r=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wt(r);if(o){var n=Wt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==qt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,e)});function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=Vt(Vt({},Kt),t),s.call(this,e,t)}return t=i,n=[{key:"terminate",value:function(e,t,n){return t=Vt(Vt({},Kt),t),_t.terminate(e,t,n)}}],null&&Ht(t.prototype,null),n&&Ht(t,n),i}(_t),Yt=window,Jt=Yt.XMLHttpRequest,en=Yt.Blob;Jt&&en&&en.prototype.slice;const tn={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let nn;const rn=new Uint8Array(16),on=[];for(let e=0;e<256;++e)on.push((e+256).toString(16).slice(1));const sn=function(e,t,n){if(tn.randomUUID&&!t&&!e)return tn.randomUUID();const r=(e=e||{}).random??e.rng?.()??function(){if(!nn){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");nn=crypto.getRandomValues.bind(crypto)}return nn(rn)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return(on[e[t+0]]+on[e[t+1]]+on[e[t+2]]+on[e[t+3]]+"-"+on[e[t+4]]+on[e[t+5]]+"-"+on[e[t+6]]+on[e[t+7]]+"-"+on[e[t+8]]+on[e[t+9]]+"-"+on[e[t+10]]+on[e[t+11]]+on[e[t+12]]+on[e[t+13]]+on[e[t+14]]+on[e[t+15]]).toLowerCase()}(r)};function an(e){let t=-1;do{e/=1024,t++}while(e>1024);return Math.max(e,.01).toFixed(2)+[" kB"," MB"," GB"," TB","PB","EB","ZB","YB"][t]}let ln=null,cn=!1;const un={namespaced:!0,state:{retention:null,password:"",files:[],sid:function(){const e=document.location.search.match(/sid=([^&]+)/);return e?e[1]:Je()(sn()).toString().substr(0,12)}(),uploadURI:(window.PSITRANSFER_UPLOAD_PATH||"/")+"files"},getters:{shareUrl:e=>document.head.getElementsByTagName("base")[0].href+e.sid,percentUploaded:(e,t)=>Math.min(Math.round(t.bytesUploaded/t.bucketSize*100),100),bytesUploaded:e=>e.files.reduce(((e,t)=>e+t.progress.bytesUploaded),0),bucketSize:e=>e.files.reduce(((e,t)=>e+t._File.size),0),bucketSizeError:(e,t,n)=>{const r=n.config&&n.config.maxBucketSize;return!!r&&t.bucketSize>r&&n.lang.bucketSizeExceed.replace("%%",an(t.bucketSize)).replace("%%",an(r))}},mutations:{RETENTION(e,t){e.retention=t},PASSWORD(e,t){e.password=t},ADD_FILE(e,t){e.files.splice(0,0,t)},REMOVE_FILE(e,t){let n=e.files.indexOf(t);n>-1&&e.files.splice(n,1)},UPDATE_FILE(e,t){for(let e in t.data)t.file[e]=t.data[e]},NEW_SESSION(e){e.password="",e.files.splice(0,e.files.length),e.sid=Je()(sn()).toString().substr(0,12)}},actions:{addFiles({commit:e,state:t,rootState:n},r){if(!t.disabled)for(let t=0;t<r.length;t++){let o=!1;const{maxFileSize:s}=n.config;s&&r[t].size>s&&(o=n.lang.fileSizeExceed.replace("%%",an(r[t].size)).replace("%%",an(s))),e("ADD_FILE",{_File:r[t],name:r[t].name,comment:"",progress:{percentage:0,humanSize:0,bytesUploaded:0},uploaded:!1,error:o,humanSize:an(r[t].size),_retryDelay:500,_retries:0})}},removeFile({commit:e,state:t},n){e("REMOVE_FILE",n)},upload({commit:e,dispatch:t,state:n,rootState:r}){e("STATE","uploading",{root:!0}),e("ERROR","",{root:!0}),null===ln&&(ln=function(){cn=!1,e("ERROR",!1,{root:!0}),t("upload")}),cn&&window.removeEventListener("online",ln),n.files.forEach((async t=>{t.error="",t._retries=0,t._retryDelay=500;const o=t._File,s=()=>{new Xt(o,{uploadUrl:t._uploadUrl,metadata:{sid:n.sid,retention:n.retention,password:n.password,name:t.name,comment:t.comment,type:t._File.type},headers:{"x-passwd":r.config.uploadPass},parallelUploads:1,chunkSize:5e6,endpoint:n.uploadURI,storeFingerprintForResuming:!1,retryDelays:null,onAfterResponse:function(e,n){"POST"===e.getMethod()&&e.getURL()===this.endpoint&&201===n.getStatus()&&(t._uploadUrl=n.getHeader("location"))},onError(r){let o=null;try{o=JSON.parse(r.originalResponse.getBody()).message}catch(e){}if(navigator.onLine)if(r&&r.originalResponse&&r.originalResponse._xhr&&r.originalResponse._xhr.status>=400&&r.originalResponse._xhr.status<500)e("UPDATE_FILE",{file:t,data:{error:o||r.message||r.toString()}});else{if(t._retries>30)return e("UPDATE_FILE",{file:t,data:{error:o||r.message||r.toString()}}),void(n.files.every((e=>e.error))&&(e("STATE","uploadError",{root:!0}),e("ERROR","Upload failed.",{root:!0})));t._retryDelay=Math.min(1.7*t._retryDelay,1e4),t._retries++,console&&console.log(r.message||r.toString(),"; will retry in",t._retryDelay,"ms"),setTimeout(s,t._retryDelay)}else e("ERROR","You are offline. Your uploads will resume as soon as you are back online.",{root:!0}),cn||(cn=!0,window.addEventListener("online",ln))},onProgress(n,r){if(n===r)return;t.error="",t._retries=0,t._retryDelay=500;const o=Math.round(n/r*1e4)/100;e("UPDATE_FILE",{file:t,data:{progress:{percentage:o,humanSize:an(n),bytesUploaded:n}}})},onSuccess(){e("UPDATE_FILE",{file:t,data:{uploaded:!0,progress:{percentage:100,humanFileSize:t.humanSize,bytesUploaded:t._File.size}}}),n.files.every((e=>e.uploaded))&&(fetch(n.uploadURI+"/"+n.sid+"?lock=yes",{method:"PATCH"}),e("STATE","uploaded",{root:!0}))}}).start()};s()}))}}},fn={name:"Files",components:{FileIcon:Xe},computed:{...Oe("upload",["files"]),...Oe(["state"]),...ze("upload",["bucketSize","bucketSizeError"]),...ze(["disabled"])},mounted(){this.dragDropCleanup=Ve()("body",(e=>this.$store.dispatch("upload/addFiles",e)))},watch:{state:function(e){"uploading"===e&&this.dragDropCleanup()}},methods:{humanFileSize:an,triggerFileInput(){if(this.disabled)return;const e=document.getElementById("fileInput");e&&e.click()}}};const dn=(0,Ge.A)(fn,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"upload-files"},[t("div",{staticClass:"panel panel-default",class:{"panel-primary":!e.disabled}},[t("div",{staticClass:"panel-heading"},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.bucketSize>0,expression:"bucketSize > 0"}],staticClass:"pull-right"},[e._v(e._s(e.humanFileSize(e.bucketSize)))]),t("strong",[e._v(e._s(e.$root.lang.files))])]),t("div",{staticClass:"panel-body"},[t("div",{directives:[{name:"show",rawName:"v-show",value:0===e.files.length,expression:"files.length === 0"}],staticClass:"empty-files-big-plus",style:{cursor:e.disabled?"default":"pointer"},attrs:{tabindex:"0",role:"button"},on:{click:function(t){return e.triggerFileInput()},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.triggerFileInput())},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:(t.preventDefault(),e.triggerFileInput())}]}},[t("a",[t("icon",{attrs:{name:"plus",scale:"4"}}),t("br"),e._v(" "+e._s(e.$root.lang.dropFilesHere))],1)]),t("table",{staticClass:"table table-striped"},[t("tbody",e._l(e.files,(function(n){return t("tr",[t("td",{staticClass:"file-icon"},[t("file-icon",{attrs:{file:n._File}})],1),t("td",[t("p",[t("strong",[e._v(" "+e._s(n.name))]),t("small",[e._v(" ("+e._s(n.humanSize)+")")])]),t("p",[t("input",{directives:[{name:"model",rawName:"v-model",value:n.comment,expression:"file.comment"}],staticClass:"form-control input-sm",attrs:{type:"text",placeholder:e.$root.lang.comment,disabled:e.disabled},domProps:{value:n.comment},on:{input:function(t){t.target.composing||e.$set(n,"comment",t.target.value)}}})]),n.error?t("div",{staticClass:"alert alert-danger"},[t("icon",{staticClass:"fa-fw",attrs:{name:"exclamation-triangle"}}),e._v(" "+e._s(n.error))],1):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:!n.error&&("uploading"===e.state||"uploaded"===e.state),expression:"!file.error && (state === 'uploading' || state === 'uploaded')"}],staticClass:"progress"},[t("div",{staticClass:"progress-bar progress-bar-success progress-bar-striped",class:{active:!n.uploaded},style:{width:n.progress.percentage+"%"}})])]),t("td",{staticClass:"btns"},[t("a",{directives:[{name:"show",rawName:"v-show",value:!e.disabled||e.bucketSizeError,expression:"!disabled || bucketSizeError"}],staticStyle:{cursor:"pointer"},attrs:{tabindex:"0",role:"button"},on:{click:function(t){return e.$store.dispatch("upload/removeFile",n)},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.$store.dispatch("upload/removeFile",n))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:(t.preventDefault(),e.$store.dispatch("upload/removeFile",n))}]}},[t("icon",{attrs:{name:"times"}})],1)])])})),0)]),t("input",{staticStyle:{display:"none"},attrs:{id:"fileInput",type:"file",multiple:"",disabled:e.disabled},on:{change:function(t){return e.$store.dispatch("upload/addFiles",t.target.files)}}}),t("div",{staticClass:"text-right"},[t("a",{directives:[{name:"show",rawName:"v-show",value:e.files.length>0,expression:"files.length>0"}],staticClass:"btn btn-success btn-sm",attrs:{disabled:e.disabled,tabindex:"0",role:"button"},on:{click:function(t){return e.triggerFileInput()},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.triggerFileInput())},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:(t.preventDefault(),e.triggerFileInput())}]}},[t("icon",{attrs:{name:"plus-circle"}})],1)])])])])}),[],!1,null,null,null).exports;n(547),n(794);const pn={name:"Clipboard",props:{value:{type:String,required:!0}},data:()=>({state:"pristine"}),methods:{copy(){let e=document.createElement("textarea");Object.assign(e.style,{position:"absolute",left:"-200%"}),e.value=this.value,document.body.appendChild(e);let t=!1;try{e.select(),t=document.execCommand("copy")}catch(e){alert(this.$root.lang.oldBrowserError),console.error(e)}document.body.removeChild(e),this.state=t?"copied":"error",this.$emit("change",this.state)}}},hn=(0,Ge.A)(pn,(function(){var e=this,t=e._self._c;return t("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){return t.stopPropagation(),e.copy()}}},[e._t("default",(function(){return["pristine"===e.state?t("icon",{staticClass:"fa-fw",attrs:{name:"copy"}}):e._e(),"copied"===e.state?t("icon",{staticClass:"fa-fw",attrs:{name:"check"}}):e._e(),"error"===e.state?t("icon",{staticClass:"fa-fw",attrs:{name:"exclamation-triangle"}}):e._e(),e._t("text",(function(){return[e._v(" "+e._s(e.$root.lang.clipboard))]}))]}),{state:e.state})],2)}),[],!1,null,null,null).exports;n(548),Ze.A.register({upload:{width:512,height:512,paths:[{d:"M296 384h-80c-13.3 0-24-10.7-24-24v-168h-87.7c-17.8 0-26.7-21.5-14.1-34.1l152.1-152.2c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1h-87.7v168c0 13.3-10.7 24-24 24zM512 376v112c0 13.3-10.7 24-24 24h-464c-13.3 0-24-10.7-24-24v-112c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zM388 464c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zM452 464c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}]}}),Ze.A.register({spinner:{width:512,height:512,paths:[{d:"M304 48c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zM256 416c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48zM464 208c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48zM96 256c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zM108.9 355.1c26.5 0 48 21.5 48 48 0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48zM403.1 355.1c26.5 0 48 21.5 48 48 0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48zM108.9 60.9c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48z"}]}}),Ze.A.register({envelope:{width:512,height:512,paths:[{d:"M502.3 190.8c3.9-3.1 9.7-0.2 9.7 4.7v204.5c0 26.5-21.5 48-48 48h-416c-26.5 0-48-21.5-48-48v-204.4c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7 0.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c-23.2 0.4-56.6-29.2-73.4-41.4-132.7-96.3-142.8-104.8-173.4-128.7-5.8-4.6-9.2-11.5-9.2-18.9v-19c0-26.5 21.5-48 48-48h416c26.5 0 48 21.5 48 48v19c0 7.4-3.4 14.4-9.2 18.9-30.6 24-40.7 32.4-173.4 128.7-16.8 12.2-50.2 41.8-73.4 41.4z"}]}}),Ze.A.register({qrcode:{width:448,height:512,paths:[{d:"M0 224v-192h192v192h-192zM64 96v64h64v-64h-64zM256 32h192v192h-192v-192zM384 160v-64h-64v64h64zM0 480v-192h192v192h-192zM64 352v64h64v-64h-64zM416 288h32v128h-96v-32h-32v96h-64v-192h96v32h64v-32zM416 448h32v32h-32v-32zM352 448h32v32h-32v-32z"}]}});const wn={name:"Upload",components:{Settings:We,Files:dn,Clipboard:hn},data:()=>({uploadPassword:"",uploadPasswordWrong:null}),computed:{...Oe(["state"]),...Oe("config",["uploadPassRequired","uploadPass","requireBucketPassword","disableQrCode"]),...Oe("upload",["sid","files","password"]),...ze(["error","disabled"]),...ze("upload",["percentUploaded","shareUrl","bucketSize","bytesUploaded"]),mailLnk:function(){return this.$store.state.config&&this.$store.state.config.mailTemplate&&this.$store.state.config.mailTemplate.replace("%%URL%%",this.shareUrl)},showLogin(){return this.uploadPassRequired&&!1!==this.uploadPasswordWrong},showUploadBtn(){return this.files.length&&!this.disabled&&(this.requireBucketPassword&&this.password||!this.requireBucketPassword)}},watch:{state:function(e){if("uploaded"===e||"uploadError"===e){const e=document.getElementById("uploadApp");if(!e||!e.scrollIntoView)return;e.scrollIntoView(!0)}}},methods:{newSession(){confirm(this.$root.lang.createNewUploadSession)&&document.location.reload()},async setUploadPass(){try{this.$store.commit("config/SET",{uploadPass:this.uploadPassword}),await this.$store.dispatch("config/fetch"),this.uploadPasswordWrong=!1}catch(e){"PWDREQ"===e.code?(this.uploadPassword="",this.uploadPasswordWrong=!0):console.error(e)}},showQrCode(){const e=new ue({level:"H"}).encode(new fe(this.shareUrl)).toDataURL(7,10),t=e.substr(e.indexOf(",")+1),n=atob(t),r=new Array(n.length);for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e);const o=new Uint8Array(r),s=new Blob([o],{type:"image/gif;base64"});window.open(URL.createObjectURL(s))},humanFileSize:an}};n(701);const gn=(0,Ge.A)(wn,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"upload-app",attrs:{id:"uploadApp"}},[e.showLogin?e._e():t("a",{staticClass:"btn btn-sm btn-info btn-new-session",attrs:{title:e.$root.lang.newUpload,tabindex:"-1",role:"button"},on:{click:function(t){return e.newSession()},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.newSession())},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:(t.preventDefault(),e.newSession())}]}},[t("icon",{staticClass:"fa-fw",attrs:{name:"cloud-upload-alt"}}),t("span",{staticClass:"hidden-xs"},[e._v(" "+e._s(e.$root.lang.newUpload))])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"alert alert-danger"},[t("strong",[t("icon",{staticClass:"fa-fw",attrs:{name:"exclamation-triangle"}}),e._v(" "+e._s(e.error))],1)]),e.showLogin?t("form",{staticClass:"well upload-uploadPassword",on:{submit:function(t){return t.preventDefault(),e.setUploadPass()}}},[t("h3",[e._v(e._s(e.$root.lang.uploadPassword))]),t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.uploadPassword,expression:"uploadPassword"}],staticClass:"form-control",attrs:{type:"password",autofocus:""},domProps:{value:e.uploadPassword},on:{input:function(t){t.target.composing||(e.uploadPassword=t.target.value)}}})]),t("p",{directives:[{name:"show",rawName:"v-show",value:e.uploadPasswordWrong,expression:"uploadPasswordWrong"}],staticClass:"text-danger"},[t("strong",[e._v(e._s(e.$root.lang.accessDenied))])]),t("button",{staticClass:"uploadPass btn btn-primary",attrs:{disabled:e.uploadPassword.length<1,type:"submit"}},[t("icon",{staticClass:"fa-fw",attrs:{name:"key"}}),e._v(" "+e._s(e.$root.lang.login))],1)]):e.$root.configFetched?t("div",[t("div",{directives:[{name:"show",rawName:"v-show",value:"uploaded"===e.state,expression:"state === 'uploaded'"}],staticClass:"well"},[t("div",{staticClass:"pull-right btn-group upload-success-btns"},[e.disableQrCode?e._e():t("a",{staticClass:"btn btn-primary",attrs:{href:"#",title:e.$root.lang.showQrCode,tabindex:"0",role:"button"},on:{click:function(t){return t.preventDefault(),e.showQrCode.apply(null,arguments)},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.showQrCode.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:(t.preventDefault(),e.showQrCode.apply(null,arguments))}]}},[t("icon",{staticClass:"fa-fw",attrs:{name:"qrcode"}}),e._v("QR-Code")],1),t("a",{staticClass:"btn btn-primary",attrs:{href:e.mailLnk,title:e.$root.lang.sendViaMail,tabindex:"0"}},[t("icon",{staticClass:"fa-fw",attrs:{name:"envelope"}}),e._v(" "+e._s(e.$root.lang.email))],1),t("clipboard",{staticClass:"btn btn-primary",attrs:{value:e.shareUrl,title:e.$root.lang.copyToClipboard,tabindex:"0"}})],1),t("h3",{staticClass:"text-success"},[t("icon",{staticClass:"fa-fw",attrs:{name:"check"}}),e._v(" "+e._s(e.$root.lang.uploadCompleted))],1),t("div",{staticClass:"share-link"},[t("span",{staticClass:"title"},[e._v(e._s(e.$root.lang.downloadLink)+":")]),t("a",{attrs:{href:e.shareUrl}},[e._v(e._s(e.shareUrl))])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:"uploading"===e.state,expression:"state === 'uploading'"}],staticClass:"row overall-process"},[t("div",{staticClass:"col-xs-12"},[t("icon",{staticClass:"pull-left",staticStyle:{"margin-right":"10px"},attrs:{name:"spinner",scale:"2",spin:""}}),t("div",{staticClass:"progress"},[t("div",{staticClass:"progress-bar progress-bar-success progress-bar-striped active",style:{width:e.percentUploaded+"%"}},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.percentUploaded>8,expression:"percentUploaded>8"}]},[e._v(e._s(e.percentUploaded)+"%")]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.percentUploaded>15,expression:"percentUploaded>15"}],staticStyle:{"margin-left":"10px"}},[e._v("("+e._s(e.humanFileSize(e.bytesUploaded))+" / "+e._s(e.humanFileSize(e.bucketSize))+")")])])])],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-7"},[t("files")],1),t("div",{staticClass:"col-sm-5"},[t("settings"),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showUploadBtn,expression:"showUploadBtn"}],staticClass:"text-right"},[t("button",{staticClass:"btn btn-lg btn-success",attrs:{id:"uploadBtn"},on:{click:function(t){return e.$store.dispatch("upload/upload")}}},[t("icon",{staticClass:"fa-fw",attrs:{name:"upload"}}),e._v(" "+e._s(e.$root.lang.upload))],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:"uploadError"===e.state,expression:"state === 'uploadError'"}],staticClass:"text-right"},[t("button",{staticClass:"btn btn-lg btn-success",attrs:{id:"uploadRetryBtn"},on:{click:function(t){return e.$store.dispatch("upload/upload")}}},[t("icon",{staticClass:"fa-fw",attrs:{name:"upload"}}),e._v(" "+e._s(e.$root.lang.retry))],1)])],1)])]):e._e()])}),[],!1,null,null,null).exports,mn={namespaced:!0,state:{uploadPassRequired:!1,uploadPass:null},mutations:{SET(e,t){for(let n in t)o().set(e,n,t[n])}},actions:{fetch:({commit:e,state:t})=>new Promise(((n,r)=>{const o=new XMLHttpRequest;o.open("GET","config.json"),t.uploadPass&&o.setRequestHeader("x-passwd",t.uploadPass),o.onload=()=>{if(200===o.status)try{const t=JSON.parse(o.responseText);e("SET",t),e("upload/RETENTION",t.defaultRetention,{root:!0})}catch(t){e("ERROR",`Config parse Error: ${t.message}`,{root:!0})}else if(401===o.status||403===o.status){e("SET",{uploadPassRequired:!0,uploadPass:null});const t=new Error("Password required");t.code="PWDREQ",r(t)}else e("ERROR",`Config load error: ${o.status} ${o.statusText}`,{root:!0});n()},o.send()}))}};o().use(Ne);const vn=new Ne.Store({modules:{config:mn,upload:un},state:{error:"",disabled:!1,state:"new",lang:{}},getters:{error:(e,t)=>e.error||t["upload/bucketSizeError"],disabled:(e,t)=>!!t.error||e.disabled},mutations:{ERROR(e,t){e.error=t,e.disabled=!0},DISABLE(e){e.disabled=!0},STATE(e,t){e.state=t,"new"!==t&&(e.disabled=!0)},LANG(e,t){e.lang=t}}});o().component("icon",Ze.A),new(o())({el:"#upload",data:{baseURI:document.head.getElementsByTagName("base")[0].href.replace(/\/$/),configFetched:!1,lang:{}},store:vn,render:e=>e(gn),async beforeCreate(){try{this.lang=await async function(){return new Promise(((e,t)=>{const n=new XMLHttpRequest;n.open("GET","lang.json"),n.onload=()=>{if(200===n.status)try{e(JSON.parse(n.responseText))}catch(e){t(e)}else t(new Error(`HTTP-GET error: ${n.status} ${n.statusText}`))},n.send()}))}(),this.$store.commit("LANG",this.lang)}catch(e){alert(e)}try{await this.$store.dispatch("config/fetch")}catch(e){"PWDREQ"!==e.code&&console.error(e)}this.configFetched=!0}}),window.PSITRANSFER_VERSION="#36c67dfb4b"},477:()=>{},519:(e,t,n)=>{"use strict";var r=n(564),o=n(725),s=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,l=/:\d+$/,c=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function f(e){return(e||"").toString().replace(s,"")}var d=[["#","hash"],["?","query"],function(e,t){return w(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};function h(e){var t,r=("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).location||{},o={},s=typeof(e=e||r);if("blob:"===e.protocol)o=new m(unescape(e.pathname),{});else if("string"===s)for(t in o=new m(e,{}),p)delete o[t];else if("object"===s){for(t in e)t in p||(o[t]=e[t]);void 0===o.slashes&&(o.slashes=a.test(e.href))}return o}function w(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=f(e)).replace(i,""),t=t||{};var n,r=c.exec(e),o=r[1]?r[1].toLowerCase():"",s=!!r[2],a=!!r[3],l=0;return s?a?(n=r[2]+r[3]+r[4],l=r[2].length+r[3].length):(n=r[2]+r[4],l=r[2].length):a?(n=r[3]+r[4],l=r[3].length):n=r[4],"file:"===o?l>=2&&(n=n.slice(2)):w(o)?n=r[4]:o?s&&(n=n.slice(2)):l>=2&&w(t.protocol)&&(n=r[4]),{protocol:o,slashes:s||w(o),slashesCount:l,rest:n}}function m(e,t,n){if(e=(e=f(e)).replace(i,""),!(this instanceof m))return new m(e,t,n);var s,a,l,c,p,v,y=d.slice(),b=typeof t,_=this,C=0;for("object"!==b&&"string"!==b&&(n=t,t=null),n&&"function"!=typeof n&&(n=o.parse),s=!(a=g(e||"",t=h(t))).protocol&&!a.slashes,_.slashes=a.slashes||s&&t.slashes,_.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||u.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!w(_.protocol)))&&(y[3]=[/(.*)/,"pathname"]);C<y.length;C++)"function"!=typeof(c=y[C])?(l=c[0],v=c[1],l!=l?_[v]=e:"string"==typeof l?~(p="@"===l?e.lastIndexOf(l):e.indexOf(l))&&("number"==typeof c[2]?(_[v]=e.slice(0,p),e=e.slice(p+c[2])):(_[v]=e.slice(p),e=e.slice(0,p))):(p=l.exec(e))&&(_[v]=p[1],e=e.slice(0,p.index)),_[v]=_[v]||s&&c[3]&&t[v]||"",c[4]&&(_[v]=_[v].toLowerCase())):e=c(e,_);n&&(_.query=n(_.query)),s&&t.slashes&&"/"!==_.pathname.charAt(0)&&(""!==_.pathname||""!==t.pathname)&&(_.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,o=n[r-1],s=!1,i=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),i++):i&&(0===r&&(s=!0),n.splice(r,1),i--);return s&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}(_.pathname,t.pathname)),"/"!==_.pathname.charAt(0)&&w(_.protocol)&&(_.pathname="/"+_.pathname),r(_.port,_.protocol)||(_.host=_.hostname,_.port=""),_.username=_.password="",_.auth&&(~(p=_.auth.indexOf(":"))?(_.username=_.auth.slice(0,p),_.username=encodeURIComponent(decodeURIComponent(_.username)),_.password=_.auth.slice(p+1),_.password=encodeURIComponent(decodeURIComponent(_.password))):_.username=encodeURIComponent(decodeURIComponent(_.auth)),_.auth=_.password?_.username+":"+_.password:_.username),_.origin="file:"!==_.protocol&&w(_.protocol)&&_.host?_.protocol+"//"+_.host:"null",_.href=_.toString()}m.prototype={set:function(e,t,n){var s=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||o.parse)(t)),s[e]=t;break;case"port":s[e]=t,r(t,s.protocol)?t&&(s.host=s.hostname+":"+t):(s.host=s.hostname,s[e]="");break;case"hostname":s[e]=t,s.port&&(t+=":"+s.port),s.host=t;break;case"host":s[e]=t,l.test(t)?(t=t.split(":"),s.port=t.pop(),s.hostname=t.join(":")):(s.hostname=t,s.port="");break;case"protocol":s.protocol=t.toLowerCase(),s.slashes=!n;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";s[e]=t.charAt(0)!==i?i+t:t}else s[e]=t;break;case"username":case"password":s[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(s.username=t.slice(0,a),s.username=encodeURIComponent(decodeURIComponent(s.username)),s.password=t.slice(a+1),s.password=encodeURIComponent(decodeURIComponent(s.password))):s.username=encodeURIComponent(decodeURIComponent(t))}for(var c=0;c<d.length;c++){var u=d[c];u[4]&&(s[u[1]]=s[u[1]].toLowerCase())}return s.auth=s.password?s.username+":"+s.password:s.username,s.origin="file:"!==s.protocol&&w(s.protocol)&&s.host?s.protocol+"//"+s.host:"null",s.href=s.toString(),s},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,n=this,r=n.host,s=n.protocol;s&&":"!==s.charAt(s.length-1)&&(s+=":");var i=s+(n.protocol&&n.slashes||w(n.protocol)?"//":"");return n.username?(i+=n.username,n.password&&(i+=":"+n.password),i+="@"):n.password?(i+=":"+n.password,i+="@"):"file:"!==n.protocol&&w(n.protocol)&&!r&&"/"!==n.pathname&&(i+="@"),(":"===r[r.length-1]||l.test(n.hostname)&&!n.port)&&(r+=":"),i+=r+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(i+=n.hash),i}},m.extractProtocol=g,m.location=h,m.trimLeft=f,m.qs=o,e.exports=m},563:(e,t,n)=>{e.exports=function(e,t){let n,o,s,i=!0;function a(e){function o(){t&&t(e,n),t=null}i?r(o):o()}function l(e,t,r){n[e]=r,(0===--o||t)&&a(t)}Array.isArray(e)?(n=[],o=e.length):(s=Object.keys(e),n={},o=s.length),o?s?s.forEach((function(t){e[t]((function(e,n){l(t,e,n)}))})):e.forEach((function(e,t){e((function(e,n){l(t,e,n)}))})):a(null),i=!1};const r=n(11)},564:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},586:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(594),o=n.n(r),s=n(621),i=n.n(s)()(o());i.push([e.id,"\n@media all and (max-width: 500px) {\n.well {\n    padding: 19px 8px;\n}\n.upload-success-btns {\n    width: 100%;\n    margin-bottom: 10px;\n}\n.upload-success-btns .btn {\n    padding: 7px 5px;\n    font-size: 12px;\n}\n}\n","",{version:3,sources:["webpack://./src/Upload.vue"],names:[],mappings:";AAyMA;AACA;IACA,iBAAA;AACA;AACA;IACA,WAAA;IACA,mBAAA;AACA;AAEA;IACA,gBAAA;IACA,eAAA;AACA;AACA",sourcesContent:["<template lang=\"pug\">\r\n  .upload-app#uploadApp\r\n    a.btn.btn-sm.btn-info.btn-new-session(\r\n      v-if='!showLogin',\r\n      @click='newSession()',\r\n      @keydown.enter.prevent='newSession()',\r\n      @keydown.space.prevent='newSession()',\r\n      :title='$root.lang.newUpload',\r\n      tabindex=\"-1\",\r\n      role=\"button\"\r\n    )\r\n      icon.fa-fw(name=\"cloud-upload-alt\")\r\n      span.hidden-xs  {{ $root.lang.newUpload }}\r\n    .alert.alert-danger(v-show=\"error\")\r\n      strong\r\n        icon.fa-fw(name=\"exclamation-triangle\")\r\n        |  {{ error }}\r\n    form.well.upload-uploadPassword(v-if='showLogin', @submit.prevent='setUploadPass()')\r\n      h3 {{ $root.lang.uploadPassword }}\r\n      .form-group\r\n        input.form-control(type='password', v-model='uploadPassword', autofocus)\r\n      p.text-danger(v-show='uploadPasswordWrong')\r\n        strong {{ $root.lang.accessDenied }}\r\n      |\r\n      button.uploadPass.btn.btn-primary(:disabled='uploadPassword.length<1', type=\"submit\")\r\n        icon.fa-fw(name=\"key\")\r\n        |  {{ $root.lang.login }}\r\n    div(v-else-if=\"$root.configFetched\")\r\n      .well(v-show=\"state === 'uploaded'\")\r\n        .pull-right.btn-group.upload-success-btns\r\n          a.btn.btn-primary(\r\n            v-if=\"!disableQrCode\",\r\n            @click.prevent=\"showQrCode\",\r\n            @keydown.enter.prevent=\"showQrCode\",\r\n            @keydown.space.prevent=\"showQrCode\",\r\n            href=\"#\",\r\n            :title=\"$root.lang.showQrCode\",\r\n            tabindex=\"0\",\r\n            role=\"button\"\r\n          )\r\n            icon.fa-fw(name=\"qrcode\")\r\n            | QR-Code\r\n          a.btn.btn-primary(\r\n            :href=\"mailLnk\",\r\n            :title=\"$root.lang.sendViaMail\",\r\n            tabindex=\"0\"\r\n          )\r\n            icon.fa-fw(name=\"envelope\")\r\n            |  {{ $root.lang.email }}\r\n          clipboard.btn.btn-primary(\r\n            :value='shareUrl',\r\n            :title=\"$root.lang.copyToClipboard\",\r\n            tabindex=\"0\"\r\n          )\r\n        h3.text-success\r\n          icon.fa-fw(name=\"check\")\r\n          |  {{ $root.lang.uploadCompleted }}\r\n        div.share-link\r\n          span.title {{ $root.lang.downloadLink }}:\r\n          |\r\n          a(:href='shareUrl') {{ shareUrl }}\r\n      .row.overall-process(v-show=\"state === 'uploading'\")\r\n        .col-xs-12\r\n          icon.pull-left(name=\"spinner\", scale=\"2\", spin=\"\", style=\"margin-right: 10px\")\r\n          .progress\r\n            .progress-bar.progress-bar-success.progress-bar-striped.active(:style=\"{width: percentUploaded+'%'}\")\r\n              span(v-show='percentUploaded>8') {{ percentUploaded }}%\r\n              span(v-show='percentUploaded>15' style=\"margin-left: 10px\") ({{ humanFileSize(bytesUploaded) }} / {{ humanFileSize(bucketSize) }})\r\n      .row\r\n        .col-sm-7\r\n          files\r\n        .col-sm-5\r\n          settings\r\n          .text-right(v-show='showUploadBtn')\r\n            button#uploadBtn.btn.btn-lg.btn-success(@click=\"$store.dispatch('upload/upload')\")\r\n              icon.fa-fw(name=\"upload\")\r\n              |  {{ $root.lang.upload }}\r\n          .text-right(v-show=\"state === 'uploadError'\")\r\n            button#uploadRetryBtn.btn.btn-lg.btn-success(@click=\"$store.dispatch('upload/upload')\")\r\n              icon.fa-fw(name=\"upload\")\r\n              |  {{ $root.lang.retry }}\r\n</template>\r\n\r\n<script type=\"text/babel\">\r\n  import { Encoder, Byte } from \"@nuintun/qrcode\";\r\n  import { mapState, mapGetters } from 'vuex';\r\n\r\n  import Settings from './Upload/Settings.vue';\r\n  import Files from './Upload/Files.vue';\r\n  import Clipboard from './common/Clipboard.vue'\r\n  import 'vue-awesome/icons/cloud-upload-alt';\r\n  import 'vue-awesome/icons/upload';\r\n  import 'vue-awesome/icons/check';\r\n  import 'vue-awesome/icons/spinner';\r\n  import 'vue-awesome/icons/envelope';\r\n  import 'vue-awesome/icons/qrcode';\r\n  import 'vue-awesome/icons/exclamation-triangle';\r\n  import { humanFileSize } from \"./Upload/store/upload\";\r\n\r\n\r\n  export default {\r\n    name: 'Upload',\r\n    components: {\r\n      Settings,\r\n      Files,\r\n      Clipboard,\r\n    },\r\n\r\n    data() {\r\n      return {\r\n        uploadPassword: '',\r\n        uploadPasswordWrong: null,\r\n      }\r\n    },\r\n\r\n    computed: {\r\n      ...mapState(['state']),\r\n      ...mapState('config', ['uploadPassRequired', 'uploadPass', 'requireBucketPassword', 'disableQrCode']),\r\n      ...mapState('upload', ['sid', 'files', 'password']),\r\n      ...mapGetters(['error', 'disabled']),\r\n      ...mapGetters('upload', ['percentUploaded', 'shareUrl', 'bucketSize', 'bytesUploaded']),\r\n      mailLnk: function() {\r\n        return this.$store.state.config\r\n          && this.$store.state.config.mailTemplate\r\n          && this.$store.state.config.mailTemplate.replace('%%URL%%', this.shareUrl);\r\n      },\r\n      showLogin() {\r\n        return this.uploadPassRequired && this.uploadPasswordWrong !== false;\r\n      },\r\n      showUploadBtn() {\r\n        return this.files.length\r\n          && !this.disabled\r\n          && (this.requireBucketPassword && this.password || !this.requireBucketPassword)\r\n      }\r\n    },\r\n\r\n    watch: {\r\n      state: function(val) {\r\n        if (val === 'uploaded' || val === 'uploadError') {\r\n          const el = document.getElementById('uploadApp');\r\n          if (!el || !el.scrollIntoView) return;\r\n          el.scrollIntoView(true);\r\n        }\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      newSession() {\r\n        if (!confirm(this.$root.lang.createNewUploadSession)) return;\r\n        document.location.reload();\r\n      },\r\n      async setUploadPass() {\r\n        try {\r\n          this.$store.commit('config/SET', {uploadPass: this.uploadPassword});\r\n          await this.$store.dispatch('config/fetch');\r\n          this.uploadPasswordWrong = false;\r\n        } catch(e) {\r\n          if(e.code === 'PWDREQ') {\r\n            this.uploadPassword = '';\r\n            this.uploadPasswordWrong = true;\r\n          } else {\r\n            console.error(e);\r\n          }\r\n        }\r\n      },\r\n      showQrCode() {\r\n        const qrcode = new Encoder({level: 'H'}).encode(new Byte(this.shareUrl));\r\n        const imgSrc = qrcode.toDataURL(7, 10);\r\n        const data = imgSrc.substr(imgSrc.indexOf(',') + 1);\r\n        const byteCharacters = atob(data);\r\n        const byteNumbers = new Array(byteCharacters.length);\r\n        for (let i = 0; i < byteCharacters.length; i++) {\r\n          byteNumbers[i] = byteCharacters.charCodeAt(i);\r\n        }\r\n        const byteArray = new Uint8Array(byteNumbers);\r\n        const file = new Blob([byteArray], { type: 'image/gif;base64' });\r\n        window.open(URL.createObjectURL(file));\r\n      },\r\n      humanFileSize\r\n    }\r\n\r\n  }\r\n<\/script>\r\n\r\n<style>\r\n  @media all and (max-width: 500px) {\r\n    .well {\r\n      padding: 19px 8px;\r\n    }\r\n    .upload-success-btns {\r\n      width: 100%;\r\n      margin-bottom: 10px;\r\n    }\r\n\r\n    .upload-success-btns .btn {\r\n      padding: 7px 5px;\r\n      font-size: 12px;\r\n    }\r\n  }\r\n</style>\r\n"],sourceRoot:""}]);const a=i},614:function(e,t,n){var r,o;o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:this,e.exports=function(n){"use strict";var o,s=(n=n||{}).Base64,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(i),l=String.fromCharCode,c=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?l(192|t>>>6)+l(128|63&t):l(224|t>>>12&15)+l(128|t>>>6&63)+l(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return l(240|t>>>18&7)+l(128|t>>>12&63)+l(128|t>>>6&63)+l(128|63&t)},u=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,f=function(e){return e.replace(u,c)},d=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[i.charAt(n>>>18),i.charAt(n>>>12&63),t>=2?"=":i.charAt(n>>>6&63),t>=1?"=":i.charAt(63&n)].join("")},p=n.btoa&&"function"==typeof n.btoa?function(e){return n.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,d)},h=function(e){return p(f(String(e)))},w=function(e){return e.replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,"")},g=function(e,t){return t?w(h(e)):h(e)};n.Uint8Array&&(o=function(e,t){for(var n="",r=0,o=e.length;r<o;r+=3){var s=e[r],a=e[r+1],l=e[r+2],c=s<<16|a<<8|l;n+=i.charAt(c>>>18)+i.charAt(c>>>12&63)+(void 0!==a?i.charAt(c>>>6&63):"=")+(void 0!==l?i.charAt(63&c):"=")}return t?w(n):n});var m,v=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,y=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return l((t>>>10)+55296)+l(56320+(1023&t));case 3:return l((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return l((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},b=function(e){return e.replace(v,y)},_=function(e){var t=e.length,n=t%4,r=(t>0?a[e.charAt(0)]<<18:0)|(t>1?a[e.charAt(1)]<<12:0)|(t>2?a[e.charAt(2)]<<6:0)|(t>3?a[e.charAt(3)]:0),o=[l(r>>>16),l(r>>>8&255),l(255&r)];return o.length-=[0,0,2,1][n],o.join("")},C=n.atob&&"function"==typeof n.atob?function(e){return n.atob(e)}:function(e){return e.replace(/\S{1,4}/g,_)},S=function(e){return C(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},k=function(e){return function(e){return b(C(e))}(String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))};n.Uint8Array&&(m=function(e){return Uint8Array.from(S(e),(function(e){return e.charCodeAt(0)}))});if(n.Base64={VERSION:"2.6.2",atob:S,btoa:p,fromBase64:k,toBase64:g,utob:f,encode:g,encodeURI:function(e){return g(e,!0)},btou:b,decode:k,noConflict:function(){var e=n.Base64;return n.Base64=s,e},fromUint8Array:o,toUint8Array:m},"function"==typeof Object.defineProperty){var U=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};n.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",U((function(){return k(this)}))),Object.defineProperty(String.prototype,"toBase64",U((function(e){return g(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",U((function(){return g(this,!0)})))}}return n.Meteor&&(Base64=n.Base64),e.exports?e.exports.Base64=n.Base64:void 0===(r=function(){return n.Base64}.apply(t,[]))||(e.exports=r),{Base64:n.Base64}}(o)},628:(e,t,n)=>{e.exports=function(e,t){if("string"==typeof e){const t=e;if(!(e=window.document.querySelector(e)))throw new Error(`"${t}" does not match any HTML elements`)}if(!e)throw new Error(`"${e}" is not a valid HTML element`);"function"==typeof t&&(t={onDrop:t}),e.addEventListener("dragenter",i,!1),e.addEventListener("dragover",a,!1),e.addEventListener("dragleave",l,!1),e.addEventListener("drop",c,!1);let n=!1,r=0;return function(){u(),e.removeEventListener("dragenter",i,!1),e.removeEventListener("dragover",a,!1),e.removeEventListener("dragleave",l,!1),e.removeEventListener("drop",c,!1)};function s(e){if(e.dataTransfer.items||e.dataTransfer.types){const n=Array.from(e.dataTransfer.items),r=Array.from(e.dataTransfer.types);let o,s;if(n.length)o=n.filter((e=>"file"===e.kind)),s=n.filter((e=>"string"===e.kind));else{if(!r.length)return!1;o=r.filter((e=>"Files"===e)),s=r.filter((e=>e.startsWith("text/")))}return!(0===o.length&&!t.onDropText||0===s.length&&!t.onDrop||0===o.length&&0===s.length)}return!1}function i(o){if(o.stopPropagation(),o.preventDefault(),s(o))return n?(r+=1,!1):(n=!0,t.onDragEnter&&t.onDragEnter(o),e.classList.add("drag"),!1)}function a(e){if(e.stopPropagation(),e.preventDefault(),s(e))return t.onDragOver&&t.onDragOver(e),e.dataTransfer.dropEffect="copy",!1}function l(e){if(e.stopPropagation(),e.preventDefault(),s(e))return r>0?(r-=1,!1):(n=!1,t.onDragLeave&&t.onDragLeave(e),u(),!1)}function c(e){e.stopPropagation(),e.preventDefault(),t.onDragLeave&&t.onDragLeave(e),u(),n=!1,r=0;const s={x:e.clientX,y:e.clientY},i=e.dataTransfer.getData("text");return i&&t.onDropText&&t.onDropText(i,s),t.onDrop&&e.dataTransfer.items&&o(e.dataTransfer.items,((n,r,o)=>{if(n)return void console.error(n);if(0===r.length)return;const i=e.dataTransfer.files;t.onDrop(r,s,i,o)})),!1}function u(){e.classList.remove("drag")}},e.exports.processItems=o;const r=n(563);function o(e,t){0===(e=Array.from(e).filter((e=>"file"===e.kind))).length&&t(null,[],[]),r(e.map((e=>t=>{s(e.webkitGetAsEntry(),t)})),((e,n)=>{if(e)return void t(e);const r=n.flat(1/0),o=r.filter((e=>e.isFile)),s=r.filter((e=>e.isDirectory));t(null,o,s)}))}function s(e,t){let n=[];e.isFile?e.file((n=>{n.fullPath=e.fullPath,n.isFile=!0,n.isDirectory=!1,t(null,n)}),(e=>{t(e)})):e.isDirectory&&function o(i){i.readEntries((a=>{a.length>0?(n=n.concat(Array.from(a)),o(i)):r(n.map((e=>t=>{s(e,t)})),((n,r)=>{n?t(n):(r.push({fullPath:e.fullPath,name:e.name,isFile:!1,isDirectory:!0}),t(null,r))}))}))}(e.createReader())}},701:(e,t,n)=>{var r=n(586);"string"==typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals),(0,n(83).A)("1eb2c52a",r,!0,{})},725:(e,t)=>{"use strict";var n=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,s,i=[];for(s in"string"!=typeof t&&(t="?"),e)if(n.call(e,s)){if((r=e[s])||null!=r&&!isNaN(r)||(r=""),s=o(s),r=o(r),null===s||null===r)continue;i.push(s+"="+r)}return i.length?t+i.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,o={};t=n.exec(e);){var s=r(t[1]),i=r(t[2]);null===s||null===i||s in o||(o[s]=i)}return o}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var s=n[e]={id:e,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.exports}r.m=t,e=[],r.O=(t,n,o,s)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,o,s]=e[u],a=!0,l=0;l<n.length;l++)(!1&s||i>=s)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(a=!1,s<i&&(i=s));if(a){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[n,o,s]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.j=188,(()=>{var e={188:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,s,[i,a,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(o in a)r.o(a,o)&&(r.m[o]=a[o]);if(l)var u=l(r)}for(t&&t(n);c<i.length;c++)s=i[c],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(u)},n=self.webpackChunkpsitransfer=self.webpackChunkpsitransfer||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[76],(()=>r(342)));o=r.O(o)})();
//# sourceMappingURL=upload.js.map